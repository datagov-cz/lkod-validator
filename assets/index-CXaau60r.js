var Wo=Object.defineProperty;var Ht=e=>{throw TypeError(e)};var Go=(e,t,r)=>t in e?Wo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var j=(e,t,r)=>Go(e,typeof t!="symbol"?t+"":t,r),Jt=(e,t,r)=>t.has(e)||Ht("Cannot "+r);var Me=(e,t,r)=>(Jt(e,t,"read from private field"),r?r.call(e):t.get(e)),Ve=(e,t,r)=>t.has(e)?Ht("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),He=(e,t,r,o)=>(Jt(e,t,"write to private field"),o?o.call(e,r):t.set(e,r),r);import{f as Ko,j as c,T as Qo,r as A,u as D,b as Zo,g as Xo,d as mr,i as Yo}from"./react-Bvh4EuSO.js";import{i as es,B as ts,a as rs}from"./i18next-I7DL1A95.js";import{B as W,T as os,a as hr,L as ss,u as ns,i as G,b as Se,c as fr,d as lt,e as pt,f as dt,F as as,I as is,N as cs,C as yr,P as ls,g as ps,h as ds,j as us,k as ms,l as hs}from"./mui-BUR2Wjz_.js";import{j as fs,N as gr,S as ys,d as ut,f as gs}from"./rdf-DAVs1SZh.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();var Ge={},Bt=Ko;Ge.createRoot=Bt.createRoot,Ge.hydrateRoot=Bt.hydrateRoot;function vs(){return c.jsx(W,{sx:{mb:"1rem"},children:c.jsxs(Qo,{i18nKey:"ui.introduction",children:["Dummy text node here to make i18n work, it should not be visible to a user ...",c.jsx("a",{href:"https://ofn.gov.cz/dcat-ap-cz-rozhran√≠-katalog≈Ø-otev≈ôen√Ωch-dat/2024-05-28/",target:"_blank",rel:"noopener noreferrer",children:"OFN"}),c.jsx("a",{href:"https://data.gov.cz/lok√°ln√≠-katalogy",target:"_blank",rel:"noopener noreferrer",children:"Local Data Catalogs"}),c.jsx("a",{href:"https://opendata.gov.cz/≈°patn√°-praxe:chybƒõj√≠c√≠-cors",target:"_blank",rel:"noopener noreferrer",children:"CORS"})]})})}let $s=ws();function ws(){return{catalog:new URLSearchParams(window.location.search).get("catalog")}}function js(){const[e,t]=A.useState($s);return e}function bs(e){return c.jsx(ks,{...e})}const ks=e=>{const{t}=D(),r=js(),{url:o,onChangeUrl:s,onSubmit:n}=xs(r.catalog,e.onStartValidation);return c.jsxs("div",{children:[c.jsx(os,{id:"resource-url",label:t("ui.resource-url"),variant:"standard",value:o,onChange:s,disabled:e.disabled,fullWidth:!0}),c.jsx("br",{})," ",c.jsx("br",{}),c.jsx(hr,{color:e.completed?"secondary":"primary",variant:"outlined",onClick:n,disabled:e.disabled||o==="",style:{height:"3em"},children:t("ui.submit")})]})},xs=(e,t)=>{const[r,o]=A.useState(e??"");A.useEffect(()=>{e!==null&&t(e)},[]);const s=A.useMemo(()=>a=>{o(a.target.value)},[o]),n=A.useMemo(()=>()=>t(r),[r,t]);return{url:r,onChangeUrl:s,onSubmit:n}},Ss=e=>{const{t}=D();let r;return e.message.length===0?r=c.jsx("br",{}):r=t(e.message,e.args),e.working?c.jsxs(W,{sx:{my:2},children:[c.jsx(Es,{show:e.working}),c.jsx("div",{children:r}),e.total===null?c.jsx("br",{}):c.jsx("div",{children:t("ui.processing-{total}-{actual}",{total:e.total,actual:e.actual??0})})]}):null};function Es({show:e}){return e?c.jsx(ss,{sx:{my:1}}):c.jsx("hr",{})}var mt={},Je={};const Rs=Zo(ns);var Wt;function K(){return Wt||(Wt=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=Rs}(Je)),Je}var Is=G;Object.defineProperty(mt,"__esModule",{value:!0});var be=mt.default=void 0,Ts=Is(K()),Ps=c;be=mt.default=(0,Ts.default)((0,Ps.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"ErrorOutline");function _s({report:e}){var o,s,n;const{t}=D();let r=null;return((o=e.loadingFailure)==null?void 0:o.headerContentType)===null?r=c.jsxs("div",{children:[c.jsx("div",{children:t("ui.can-not-determine-content-type-no-status-summary")}),c.jsx("div",{children:t("ui.can-not-determine-content-type-no-status-suggestion")})]}):r=c.jsxs("div",{children:[c.jsx("div",{children:t("ui.can-not-determine-content-type-status-summary")}),c.jsx("div",{children:t("ui.can-not-determine-content-type-status-suggestion-{status-code}-{content-type}",{"status-code":(s=e.loadingFailure)==null?void 0:s.contentTypeStatusCode,"content-type":((n=e.loadingFailure)==null?void 0:n.headerContentType)??""})})]}),c.jsxs("div",{style:{display:"flex",gap:"1em"},children:[c.jsx(be,{sx:{color:"red"}}),r]})}function Os(e){const{t}=D();return c.jsxs("div",{style:{display:"flex",gap:"1em"},children:[c.jsx(be,{sx:{color:"red"}}),c.jsxs("div",{children:[c.jsx("div",{children:t("ui.can-not-fetch-data-summary")}),c.jsx("div",{children:t("ui.can-not-fetch-data-suggestion")})]})]})}function As(e){const{t}=D();return c.jsxs("div",{style:{display:"flex",gap:"1em"},children:[c.jsx(be,{sx:{color:"red"}}),c.jsxs("div",{children:[c.jsx("div",{children:t("ui.can-not-convert-to-rdf-summary")}),c.jsx("div",{children:t("ui.can-not-convert-to-rdf-suggestion")})]})]})}var ht={},Cs=G;Object.defineProperty(ht,"__esModule",{value:!0});var ft=ht.default=void 0,zs=Cs(K()),Ns=c;ft=ht.default=(0,zs.default)((0,Ns.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");var yt={},Ds=G;Object.defineProperty(yt,"__esModule",{value:!0});var gt=yt.default=void 0,Fs=Ds(K()),Ls=c;gt=yt.default=(0,Fs.default)((0,Ls.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");var vt={},qs=G;Object.defineProperty(vt,"__esModule",{value:!0});var vr=vt.default=void 0,Us=qs(K()),Ms=c;vr=vt.default=(0,Us.default)((0,Ms.jsx)("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8z"}),"Folder");var $t={},Vs=G;Object.defineProperty($t,"__esModule",{value:!0});var Ne=$t.default=void 0,Hs=Vs(K()),Js=c;Ne=$t.default=(0,Hs.default)((0,Js.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew");var wt={},Bs=G;Object.defineProperty(wt,"__esModule",{value:!0});var $r=wt.default=void 0,Ws=Bs(K()),Gs=c;$r=wt.default=(0,Ws.default)((0,Gs.jsx)("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5"}),"Link");var m=(e=>(e.INFO="info",e.SUCCESS="success",e.WARNING="warning",e.ERROR="error",e.CRITICAL="critical",e))(m||{});const Pe={info:0,success:1,warning:2,error:3,critical:4};function Gt(e,t){return Ks(e,t)?e:t}function Ks(e,t){return Pe[e]>Pe[t]}function wr(e,t){return Pe[e]>=Pe[t]}function Kt(e){for(const t of e)switch(t.level){case"error":case"critical":return!0}return!1}function Qs(e){let t=!1;for(const r of e)switch(r.level){case"error":case"critical":return!1;case"warning":t=!0}return t}var C=(e=>(e.SPARQL="SPARQL",e.TURTLE="TURTLE",e.JSONLD="JSONLD",e))(C||{});const Zs=["text/turtle"],Xs=["ttl"],Ys=["application/json","application/ld+json"],en=["json","jsonld"];async function tn(e,t){const r=jr(t);return await on(e,t)?{contentType:"SPARQL",rawHeaderContentType:null,statusCode:null,contentTypeFromUrl:r}:{...await br(e,t),contentTypeFromUrl:r}}function jr(e){const t=rn(e);return Xs.includes(t)?"TURTLE":en.includes(t)?"JSONLD":null}function rn(e){return e.substr(e.lastIndexOf(".")+1).toLowerCase()}async function on(e,t){try{return await e.sparqlAsk(t,"ASK {?s ?p ?o}"),!0}catch{return!1}}async function br(e,t){const r=await e.httpGet(t);if(r.payload===null)return{contentType:null,rawHeaderContentType:null,statusCode:r.statusCode};const o=r.payload.headers.get("content-type"),s=sn(o);return s!==null?{contentType:s,rawHeaderContentType:o,statusCode:r.statusCode}:{contentType:null,rawHeaderContentType:o,statusCode:r.statusCode}}function sn(e){if(e===null)return null;const t=nn(e).type;return Zs.includes(t)?"TURTLE":Ys.includes(t)?"JSONLD":null}function nn(e){const t=e.split(";").map(o=>o.trim()),r={};for(let o=1;o<t.length;++o){const[s,n]=t[o].split("=",2);r[s.trim()]=n.trim()}return{type:t[0],parameters:r}}async function an(e,t){const r=jr(t);return{...await br(e,t),contentTypeFromUrl:r}}const kr=e=>e.startsWith("https://rpp-opendata.egon.gov.cz/odrpp/zdroj/org√°n-ve≈ôejn√©-moci/"),cn=e=>e.startsWith("http://publications.europa.eu/resource/authority/data-theme/"),ln=e=>e.startsWith("http://publications.europa.eu/resource/authority/frequency/"),pn=e=>e.startsWith("https://linked.cuzk.cz/resource/ruian/"),dn=e=>e.startsWith("http://www.iana.org/assignments/media-types/"),un=e=>e.startsWith("http://publications.europa.eu/resource/authority/file-type/"),Ie=e=>e==="http://data.europa.eu/eli/reg_impl/2023/138/oj",mn={"http://data.europa.eu/bna/c_164e0bf5":"Meteorologie","http://data.europa.eu/bna/c_a9135398":"Spoleƒçnosti a vlastnictv√≠ spoleƒçnost√≠","http://data.europa.eu/bna/c_ac64a52d":"Geoprostorov√© √∫daje","http://data.europa.eu/bna/c_b79e35eb":"Mobilita","http://data.europa.eu/bna/c_dd313021":"Zemƒõ a ≈æivotn√≠ prost≈ôed√≠","http://data.europa.eu/bna/c_e1da4e07":"Statistika"},xr=e=>mn[e]!==void 0,hn=e=>e.isJsonFormat===!0,fn=e=>e.isJsonFormat===!0,yn=e=>e.isHighValue===!0,gn=e=>e.isDataServiceDistribution===!0,vn=e=>e.isFileDistribution===!0;function $n(e){const t=wn(e),r=jn(e),o=kn(e);return{loadingFailure:t,summary:Dn(e,r,o),catalogs:r,datasets:o}}function wn(e){const t=e.catalog.entryPoint;return t.contentType!==null&&!t.failedToFetchData&&!t.conversionToRdfFailed?null:{headerContentType:t.headerContentType,contentTypeStatusCode:t.contentTypeStatusCode,failedToFetchData:t.failedToFetchData,fetchStatusCode:t.fetchStatusCode,conversionToRdfFailed:t.conversionToRdfFailed}}function jn(e){return e.catalog.catalogs.map(t=>({sourceUrl:e.catalog.entryPoint.url,iri:t.url,czechTitle:bn(t.title),withoutCzechTitle:!ne(t.title),withoutCzechDescription:!ne(t.description),withoutPublisher:t.publishers.length===0,withPublisherButNotOvm:B(t.publishers,r=>kr(r.url))}))}function bn(e){return(e==null?void 0:e.cs)??null}function ne(e){return(e==null?void 0:e.cs)!==void 0}function B(e,t){return e.length===0?!1:e.findIndex(r=>t(r))===-1}function Sr(e,t){return e.findIndex(r=>t(r))!==-1}function kn(e){return e.datasets.map(xn)}function xn(e){const t=e.entryPoint,r=(t.contentType??t.contentTypeFromUrl??null)===null,o=t.failedToFetchData,s=t.conversionToRdfFailed,n=!s&&e.datasets.length===0;let a=!1,i=null,l=null,d=null;fn(t)&&(a=!0,i=t.validByHvdJsonSchema,l=t.validByDatasetJsonSchema,d=t.validBySeriesJsonSchema);const f=e.datasets.map(h=>En(t,h));return Sn({contentType:t.contentType??t.contentTypeFromUrl??null,accessUrl:t.url,failedToDetectContentType:r,failedToFetch:o,failedToConvertToRdf:s,isEmpty:n,isJsonDocument:a,validByHvdJsonSchema:i,validByDatasetJsonSchema:l,validBySeriesJsonSchema:d,datasets:f,issues:[]})}function Sn(e){if(e.failedToDetectContentType)return{...e,issues:[{level:m.CRITICAL,payload:"issues.resource.failed-to-determine-content-type"}]};if(e.failedToFetch){let r="issues.resource.failed-to-fetch";switch(e.contentType){case C.JSONLD:r="issues.resource.failed-to-fetch-JSONLD";break;case C.SPARQL:r="issues.resource.failed-to-fetch-SPARQL";break;case C.TURTLE:r="issues.resource.failed-to-fetch-TURTLE";break}return{...e,issues:[{level:m.CRITICAL,payload:r}]}}else if(e.failedToConvertToRdf)return{...e,issues:[{level:m.CRITICAL,payload:"issues.resource.failed-to-convert-to-rdf"}]};const t=[];return e.isEmpty&&t.push({level:m.ERROR,payload:"issues.resource.no-dataset-found"}),e.validByHvdJsonSchema===!1&&t.push({level:m.ERROR,payload:"issues.resource.is-json-but-not-valid-by-hvd-json-schema"}),e.validByDatasetJsonSchema===!1&&t.push({level:m.ERROR,payload:"issues.resource.is-json-but-not-valid-by-dataset-json-schema"}),e.validBySeriesJsonSchema===!1&&t.push({level:m.ERROR,payload:"issues.resource.is-json-but-not-valid-by-series-json-schema"}),{...e,issues:t}}function En(e,t){const r=!ne(t.title),o=!ne(t.description),s=t.publishers.length===0,n=B(t.publishers,X=>kr(X.url)),a=t.accrualPeriodicities.length===0,i=B(t.accrualPeriodicities,ln),l=t.spatials.length===0,d=B(t.spatials,pn),f=t.themes.length===0,h=B(t.themes,cn),k=t.keywords.length===0,x=B(t.keywords,ne),v=t.distributions.map(Pn),P=yn(t)?Rn(t):null,$=t.hasDatasetSeriesClass?In():null;return Tn({accessUrl:e.url,iri:t.url,withoutType:!t.hasDatasetClass&&!t.hasDatasetSeriesClass,withoutCzechTitle:r,withoutCzechDescription:o,withoutPublisher:s,withPublisherButNotOvm:n,withoutAccrualPeriodicity:a,withAccrualPeriodicityButNotFromEurovoc:i,withoutSpatial:l,withSpatialButNotFromRuian:d,withoutTheme:f,withThemeButNotFromEurovoc:h,withoutKeyword:k,withKeywordButNotCzech:x,highValue:P,datasetSeries:$,distributions:v,issues:[]})}function Rn(e){const t=e.hvdCategories.length===0,r=Sr(e.hvdCategories,xr),s=e.distributions.find(n=>n.isHighValue)===void 0;return{withoutHvdCategory:t,withHvdTopCategory:r,withoutHvdDistribution:s}}function In(){return{}}function Tn(e){const t=[...e.issues];return e.withoutType&&t.push({level:m.ERROR,payload:"issues.dataset.missing-type",args:{dataset:e.iri}}),e.withoutCzechTitle&&t.push({level:m.ERROR,payload:"issues.dataset.missing-czech-title",args:{dataset:e.iri}}),e.withoutCzechDescription&&t.push({level:m.ERROR,payload:"issues.dataset.missing-czech-description",args:{dataset:e.iri}}),e.withoutPublisher&&t.push({level:m.ERROR,payload:"issues.dataset.missing-publisher",args:{dataset:e.iri}}),e.withPublisherButNotOvm&&t.push({level:m.WARNING,payload:"issues.dataset.missing-ovm-publisher",args:{dataset:e.iri}}),e.withoutAccrualPeriodicity&&t.push({level:m.ERROR,payload:"issues.dataset.missing-accrual-periodicity",args:{dataset:e.iri}}),e.withAccrualPeriodicityButNotFromEurovoc&&t.push({level:m.WARNING,payload:"issues.dataset.missing-eurovoc-accrual-periodicity",args:{dataset:e.iri}}),e.withoutSpatial&&t.push({level:m.ERROR,payload:"issues.dataset.missing-spatial",args:{dataset:e.iri}}),e.withSpatialButNotFromRuian&&t.push({level:m.WARNING,payload:"issues.dataset.missing-ruian-spatial",args:{dataset:e.iri}}),e.withoutTheme&&t.push({level:m.ERROR,payload:"issues.dataset.missing-theme",args:{dataset:e.iri}}),e.withThemeButNotFromEurovoc&&t.push({level:m.ERROR,payload:"issues.dataset.missing-eurovoc-theme",args:{dataset:e.iri}}),e.withoutKeyword&&t.push({level:m.ERROR,payload:"issues.dataset.missing-keyword",args:{dataset:e.iri}}),e.withKeywordButNotCzech&&t.push({level:m.WARNING,payload:"issues.dataset.missing-czech-keyword",args:{dataset:e.iri}}),e.highValue!==null&&(t.push({level:m.SUCCESS,payload:"issues.dataset.this-is-hvd",args:{dataset:e.iri}}),e.highValue.withoutHvdCategory&&t.push({level:m.ERROR,payload:"issues.dataset.missing-hvd-category",args:{dataset:e.iri}}),e.highValue.withHvdTopCategory&&t.push({level:m.ERROR,payload:"issues.dataset.contains-hvd-top-category",args:{dataset:e.iri}}),e.highValue.withoutHvdDistribution&&t.push({level:m.ERROR,payload:"issues.dataset.missing-hvd-distribution-for-hvd-dataset"})),e.distributions.length===0?e.datasetSeries===null&&t.push({level:m.WARNING,payload:"issues.dataset.no-distribution-found",args:{dataset:e.iri}}):e.datasetSeries!==null&&t.push({level:m.SUCCESS,payload:"issues.dataset-series.distribution-found-but-not-expected",args:{dataset:e.iri}}),{...e,issues:t}}function Pn(e){const t=e.accessURLs.length===0,r=e.termsOfUse.length===0,o=_n({iri:e.url,withoutAccessURL:t,withoutTermsOfUse:r,issues:[]});return gn(e)?On(o,e):vn(e)?zn(o,e):(console.error("Invalid distribution type!",{report:e,distribution:o}),o)}function _n(e){const t=[...e.issues];return e.withoutAccessURL&&t.push({level:m.WARNING,payload:"issues.distribution.missing-access-url-{distribution}",args:{distribution:e.iri}}),e.withoutTermsOfUse&&t.push({level:m.WARNING,payload:"issues.distribution.missing-terms-of-use-{distribution}",args:{distribution:e.iri}}),{...e,issues:t}}function On(e,t){const r=!ne(t.dataService.title),o=t.dataService.endpointURL.length===0,s=t.isHighValue?Cn(t):null;return An({...e,isDataServiceDistribution:!0,dataServiceIri:t.dataService.url,withoutCzechTitle:r,withoutEndpointURL:o,highValue:s})}function An(e){const t=[...e.issues];return e.withoutCzechTitle&&t.push({level:m.WARNING,payload:"issues.data-service.missing-czech-title-{data-service}",args:{"data-service":e.dataServiceIri}}),e.highValue&&(e.withoutEndpointURL&&t.push({level:m.ERROR,payload:"issues.data-service.missing-endpoint-url-{data-service}",args:{"data-service":e.dataServiceIri}}),e.highValue.withoutHvdCategory&&t.push({level:m.ERROR,payload:"issues.data-service.missing-hvd-category-{data-service}",args:{"data-service":e.dataServiceIri}}),e.highValue.withHvdTopCategory&&t.push({level:m.ERROR,payload:"issues.data-service.using-hvd-top-category-{data-service}",args:{"data-service":e.dataServiceIri}}),e.highValue.withoutContactPoint&&t.push({level:m.ERROR,payload:"issues.data-service.missing-contact-point-{data-service}",args:{"data-service":e.dataServiceIri}}),e.highValue.withoutPage&&t.push({level:m.ERROR,payload:"issues.data-service.missing-page-{data-service}",args:{"data-service":e.dataServiceIri}}),e.highValue.isHighValue||t.push({level:m.ERROR,payload:"issues.data-service.missing-legislation-for-hvd-{data-service}",args:{"data-service":e.iri}})),{...e,issues:t}}function Cn(e){const t=e.dataService,r=t.hvdCategories.length===0,o=Sr(t.hvdCategories,xr),s=t.contactPoints.length===0,n=t.pages.length===0;return{isHighValue:t.isHighValue,withoutHvdCategory:r,withHvdTopCategory:o,withoutContactPoint:s,withoutPage:n}}function zn(e,t){const r=t.downloadURLs.length===0,o=t.mediaTypes.length===0,s=B(t.mediaTypes,dn),n=t.formats.length===0,a=B(t.formats,un),i=t.isHighValue?Nn():null;return{...e,isFileDistribution:!0,withoutDownloadURL:r,withoutMediaTypes:o,withMediaTypeButNotFromCodelist:s,withoutFormat:n,withFormatButNotFromCodelist:a,highValue:i}}function Nn(){return{}}function Dn(e,t,r){const o=e.catalog.entryPoint,s=o.contentType??o.contentTypeFromUrl??null,n=o.contentType===null,a=o.validByShacl===!1;let i=null,l=!1;hn(o)&&(i=!o.validByJsonSchema,l=o.canBeCkanApi);const d=t.map($=>$.iri),f=o.url,h=r.filter($=>Kt($.issues)).map($=>$.accessUrl),k=r.map($=>$.datasets).flat(1),x=k.filter($=>Kt($.issues)).map($=>$.iri),v=k.filter($=>Qs($.issues)).map($=>$.iri),P=k.filter($=>$.highValue!==null).map($=>$.iri);return Fn({contentType:s,isContentTypeFromExtension:n,isInvalidByShacl:a,isInvalidByJsonSchema:i,canBeCkanApi:l,foundCatalogUrls:d,catalogs:t,expectedCatalogUrl:f,resourcesWithError:h,allFoundDatasets:k.map($=>$.iri),datasetsWithError:x,datasetsWithOnlyWarning:v,highValueDatasets:P,issues:[]})}function Fn(e){const t=[];e.isContentTypeFromExtension&&t.push({level:m.WARNING,payload:"issues.summary.content-type-from-extension"}),e.isInvalidByShacl&&t.push({level:m.WARNING,payload:"issues.summary.invalid-shacl"}),e.isInvalidByJsonSchema&&t.push({level:m.WARNING,payload:"issues.summary.invalid-json-schema"}),e.catalogs.length===0&&t.push({level:m.WARNING,payload:"issues.summary.missing-catalog"}),e.catalogs.length>1&&t.push({level:m.WARNING,payload:"issues.summary.multiple-catalogs"});for(const r of e.catalogs)r.withoutCzechTitle&&t.push({level:m.ERROR,payload:"issues.summary.missing-czech-title"}),r.withoutCzechDescription&&t.push({level:m.ERROR,payload:"issues.summary.missing-czech-description"}),r.withoutPublisher&&t.push({level:m.ERROR,payload:"issues.summary.missing-publisher"}),r.withPublisherButNotOvm&&t.push({level:m.WARNING,payload:"issues.summary.missing-ovm-publisher"});return{...e,issues:t}}async function Ln(e){return await fs.toRDF(e)}function qn(e,t){return new Promise((r,o)=>{const s=new gr.Parser({format:t}),n=[];s.parse(e,(a,i,l)=>{i===null?r(n):a?o(a):n.push(i)})})}function Un(e,t){const r=[];return new Promise((o,s)=>{new Mn({format:t},{onQuad:a=>r.push(a),onError:a=>s(a)}).parse(e).then(()=>o(r)).catch(a=>s(a))})}class Mn{constructor(t,r){j(this,"parser");j(this,"handler");j(this,"decoder",new TextDecoder("utf-8"));j(this,"onData");j(this,"onEnd");this.parser=new gr.Parser(t),this.handler=r,this.initializeParser()}initializeParser(){const t=this.createCaptureSource(),r=(o,s,n)=>{o&&this.handler.onError(o),s&&this.handler.onQuad(s)};this.parser.parse(t,r)}createCaptureSource(){return{on:(t,r)=>{switch(t){case"data":this.onData=r;break;case"end":this.onEnd=r;break}}}}async parse(t){var o,s;let r=await t.read();for(;!r.done;){const n=this.decoder.decode(r.value);(o=this.onData)==null||o.call(this,n),r=await t.read()}(s=this.onEnd)==null||s.call(this)}}async function Vn(e){return{validate:async t=>{const r=await Hn(t);return(await new ys(r,{factory:ut}).validate(Jn(e))).conforms}}}async function Hn(e){const t=await qn(e,"Turtle"),r=ut.dataset();return r.addAll(t),r}function Jn(e){const t=ut.dataset();return t.addAll(e),t}const Ke="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",Bn="http://www.w3.org/ns/dcat#Catalog",Wn="http://www.w3.org/ns/dcat#dataset",Qe="http://purl.org/dc/terms/title",Er="http://purl.org/dc/terms/description",Gn="http://purl.org/dc/terms/publisher",Qt="http://www.w3.org/ns/dcat#Dataset",Kn="http://www.w3.org/ns/dcat#distribution",Qn="http://www.w3.org/ns/dcat#keyword",Zn="http://www.w3.org/ns/dcat#theme",Xn="http://purl.org/dc/terms/accrualPeriodicity",Yn="http://purl.org/dc/terms/spatial",Be="http://data.europa.eu/r5r/applicableLegislation",ea="https://data.gov.cz/slovn√≠k/podm√≠nky-u≈æit√≠/specifikace",ta="http://www.w3.org/ns/dcat#accessURL",Zt="http://data.europa.eu/r5r/hvdCategory",ra="http://www.w3.org/ns/dcat#contactPoint",oa="http://xmlns.com/foaf/0.1/page",sa="http://www.w3.org/ns/dcat#DatasetSeries",na="http://www.w3.org/ns/dcat#inSeries",aa="http://www.w3.org/ns/dcat#accessService",ia="http://www.w3.org/ns/dcat#downloadURL",ca="http://www.w3.org/ns/dcat#mediaType",la="http://purl.org/dc/terms/format",pa="http://www.w3.org/ns/dcat#endpointURL",da=`
@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix ex: <https://example.org/> .

# This does not work in Zazuko, works in SHACL Play! though... ü§∑üèª‚Äç‚ôÇÔ∏è
ex:ExistenceKatalogu
  a sh:NodeShape ;
  sh:description "Existuje katalog"@cs ;
	sh:targetNode dcat:Catalog ;
    sh:property [
      sh:path [ sh:inversePath rdf:type ];
      sh:minCount 1;
    ] .

ex:Povinn√©AtributyKatalogu
  a sh:NodeShape ;
	sh:targetClass dcat:Catalog ;
	sh:property [
    sh:path dcterms:title ;
    sh:kind sh:Literal ;
		sh:datatype rdf:langString ;
    sh:minCount 1;
    sh:uniqueLang true;
    sh:message "Katalog mus√≠ m√≠t n√°zev v ƒçe≈°tinƒõ"@cs
  ] ;
	sh:property [
    sh:path dcterms:description ;
    sh:kind sh:Literal ;
    sh:datatype rdf:langString ;
    sh:minCount 1;
    sh:uniqueLang true;
    sh:message "Katalog mus√≠ m√≠t popis v ƒçe≈°tinƒõ"@cs
  ] ;
  sh:property [
    sh:path dcat:dataset ;
    sh:kind sh:IRI ;
    sh:minCount 1;
    sh:message "Katalog mus√≠ m√≠t datovou sadu"@cs
  ] ;
  sh:property [
    sh:path dcterms:publisher ;
    sh:kind sh:IRI ;
    sh:minCount 1;
    sh:maxCount 1;
    sh:message "Katalog mus√≠ m√≠t poskytovatele"@cs
  ] .`,ua="https://json-schema.org/draft/2020-12/schema",ma="https://ofn.gov.cz/dcat-ap-cz-rozhran√≠-katalog≈Ø-otev≈ôen√Ωch-dat/2024-05-28/sch√©mata/datov√°-sada-hvd.json",ha=[{$ref:"https://ofn.gov.cz/dcat-ap-cz-rozhran√≠-katalog≈Ø-otev≈ôen√Ωch-dat/2024-05-28/sch√©mata/datov√°-sada.json"},{type:"object",title:"Datov√° sada",required:["pr√°vn√≠_p≈ôedpis","kategorie_hvd"],properties:{pr√°vn√≠_p≈ôedpis:{type:"array",contains:{const:"http://data.europa.eu/eli/reg_impl/2023/138/oj"}},kategorie_hvd:{type:"array",items:{type:"string",format:"iri",pattern:"^http\\://data\\.europa\\.eu/bna/c_.*$",minItems:1,example:["http://data.europa.eu/bna/c_1e787364"]}},distribuce:{type:"array",contains:{oneOf:[{type:"object",required:["p≈ô√≠stupov√©_url","soubor_ke_sta≈æen√≠","pr√°vn√≠_p≈ôedpis"],properties:{pr√°vn√≠_p≈ôedpis:{type:"array",contains:{const:"http://data.europa.eu/eli/reg_impl/2023/138/oj"}}}},{type:"object",required:["p≈ô√≠stupov√©_url","pr√°vn√≠_p≈ôedpis","p≈ô√≠stupov√°_slu≈æba"],properties:{pr√°vn√≠_p≈ôedpis:{type:"array",contains:{const:"http://data.europa.eu/eli/reg_impl/2023/138/oj"}},p≈ô√≠stupov√°_slu≈æba:{type:"object",required:["pr√°vn√≠_p≈ôedpis","kontaktn√≠_bod","dokumentace","kategorie_hvd","p≈ô√≠stupov√Ω_bod"],properties:{kategorie_hvd:{type:"array",items:{type:"string",format:"iri",pattern:"^http\\://data\\.europa\\.eu/bna/c_.*$",minItems:1,example:["http://data.europa.eu/bna/c_1e787364"]}},dokumentace:{oneOf:[{type:"string",format:"iri",title:"Dokumentace",minLength:8,pattern:"^https://"},{type:"array",items:{type:"string",format:"iri",title:"Dokumentace",minLength:8,pattern:"^https://"}}]},kontaktn√≠_bod:{type:"object",required:["typ"],properties:{typ:{type:"string",examples:["Organizace"]},jm√©no:{$ref:"https://ofn.gov.cz/z√°kladn√≠-datov√©-typy/2020-07-01/sch√©mata/text.json"},"e-mail":{type:"string",format:"iri",pattern:"^mailto\\:"}}},pr√°vn√≠_p≈ôedpis:{type:"array",contains:{const:"http://data.europa.eu/eli/reg_impl/2023/138/oj"}}}}}}]}}}}],Rr={$schema:ua,$id:ma,allOf:ha},fa="https://json-schema.org/draft/2020-12/schema",ya="https://ofn.gov.cz/dcat-ap-cz-rozhran√≠-katalog≈Ø-otev≈ôen√Ωch-dat/2024-05-28/sch√©mata/datov√°-sada.json",ga="object",va="Datov√° sada",$a=["@context","typ","iri","n√°zev","popis","poskytovatel","t√©ma","periodicita_aktualizace","kl√≠ƒçov√©_slovo","prvek_r√∫ian"],wa={"@context":{const:"https://ofn.gov.cz/dcat-ap-cz-rozhran√≠-katalog≈Ø-otev≈ôen√Ωch-dat/2024-05-28/kontexty/rozhran√≠-katalog≈Ø-otev≈ôen√Ωch-dat.jsonld"},typ:{oneOf:[{const:"Datov√° sada"},{type:"array",contains:{const:"Datov√° sada"},items:{type:"string"}}]},iri:{type:"string",format:"iri",title:"Identifik√°tor",minLength:8,pattern:"^https://",examples:["https://www.trebic.cz/zdroj/aktualita/2020/dopaden√≠-lupiƒçe-na-francouzsk√©-ulici"]},n√°zev:{$ref:"https://ofn.gov.cz/z√°kladn√≠-datov√©-typy/2020-07-01/sch√©mata/text.json"},popis:{$ref:"https://ofn.gov.cz/z√°kladn√≠-datov√©-typy/2020-07-01/sch√©mata/text.json"},poskytovatel:{type:"string",format:"iri",title:"Poskytovatel",examples:["https://rpp-opendata.egon.gov.cz/odrpp/zdroj/org√°n-ve≈ôejn√©-moci/66003008"]},t√©ma:{type:"array",items:{type:"string",format:"iri",title:"T√©ma",examples:["http://publications.europa.eu/resource/authority/data-theme/TRAN"]},contains:{type:"string",format:"iri",title:"T√©ma",pattern:"^http\\://publications\\.europa\\.eu/resource/authority/data-theme/.*$",examples:["http://publications.europa.eu/resource/authority/data-theme/TRAN"]}},periodicita_aktualizace:{type:"string",format:"iri",title:"Periodicita aktualizace",pattern:"^http\\://publications\\.europa\\.eu/resource/authority/frequency/.*$",examples:["http://publications.europa.eu/resource/authority/frequency/MONTHLY"]},kl√≠ƒçov√©_slovo:{$ref:"https://ofn.gov.cz/z√°kladn√≠-datov√©-typy/2020-07-01/sch√©mata/v√≠ce-text≈Ø.json"},prvek_r√∫ian:{type:"array",items:{type:"string",format:"iri",title:"Souvisej√≠c√≠ geografick√© √∫zem√≠ - prvek z R√öIAN",pattern:"^https\\://linked\\.cuzk\\.cz/resource/ruian/.*$",examples:["https://linked.cuzk.cz/resource/ruian/stat/1"]}},geografick√©_√∫zem√≠:{type:"array",items:{type:"string",format:"iri",title:"Souvisej√≠c√≠ geografick√© √∫zem√≠",examples:["http://publications.europa.eu/resource/authority/continent/EUROPE"]}},ƒçasov√©_pokryt√≠:{type:"object",required:["typ"],properties:{typ:{oneOf:[{const:"ƒåasov√Ω interval"},{type:"array",contains:{const:"ƒåasov√Ω interval"},items:{type:"string"}}]},zaƒç√°tek:{type:"string",format:"date",title:"Datum zaƒç√°tku",examples:["2019-01-01+01:00"]},konec:{type:"string",format:"date",title:"Datum konce",examples:["2019-01-01+01:00"]}}},kontaktn√≠_bod:{type:"object",required:["typ"],properties:{typ:{type:"string",examples:["Organizace"]},jm√©no:{$ref:"https://ofn.gov.cz/z√°kladn√≠-datov√©-typy/2020-07-01/sch√©mata/text.json"},"e-mail":{type:"string",format:"iri",pattern:"^mailto\\:",examples:["mailto:sekretariat.190@mdcr.cz"]}}},dokumentace:{type:"string",format:"iri",title:"Dokumentace",examples:["https://www.mdcr.cz/Dokumenty/Verejna-doprava/Jizdni-rady,-kalendare-pro-jizdni-rady,-metodi-(1)/Jizdni-rady-verejne-dopravy"]},specifikace:{type:"array",items:{type:"string",format:"iri",title:"Specifikace",examples:["https://ofn.gov.cz/turistick√©-c√≠le/2020-07-01/"]}},koncept_euroVoc:{type:"array",items:{type:"string",format:"iri",pattern:"^http\\://eurovoc\\.europa\\.eu/.*$",title:"Klasifikace dle EuroVoc",examples:["http://eurovoc.europa.eu/1001"]}},prostorov√©_rozli≈°en√≠_v_metrech:{oneOf:[{type:"number",title:"Prostorov√© rozli≈°en√≠ v metrech",description:"Prostorov√© rozli≈°en√≠ v metrech jako JSON ƒç√≠slo pro zpƒõtnou kompatibilitu. Zp≈Øsobuje probl√©my s datov√Ωm typem xsd:decimal.",examples:[.5]},{type:"string",title:"Prostorov√© rozli≈°en√≠ v metrech",description:"Prostorov√© rozli≈°en√≠ v metrech jako JSON ≈ôetƒõzec. Preferovan√° varianta pro kompatibilitu s datov√Ωm typem xsd:decimal.",examples:["0.5"]}]},ƒçasov√©_rozli≈°en√≠:{type:"string",title:"ƒåasov√© rozli≈°en√≠",examples:["P1D"]},je_souƒç√°st√≠:{type:"string",format:"iri",title:"Je souƒç√°st√≠",examples:["https://lkod.mvcr.cz/zdroj/datov√©-s√©rie/12345"]},pr√°vn√≠_p≈ôedpis:{type:"array",items:{type:"string",format:"iri",example:["http://data.europa.eu/eli/reg_impl/2023/138/oj","https://www.e-sbirka.cz/eli/cz/sb/1999/106/2024-01-01/dokument/norma/cast_1/par_3a/odst_6"]}},distribuce:{type:"array",items:{allOf:[{title:"Distribuce",type:"object",required:["typ","iri","podm√≠nky_u≈æit√≠","p≈ô√≠stupov√©_url"],properties:{typ:{oneOf:[{const:"Distribuce"},{type:"array",contains:{const:"Distribuce"},items:{type:"string"}}]},iri:{type:"string",format:"iri",title:"Identifik√°tor",minLength:8,pattern:"^https?://",examples:["https://www.trebic.cz/zdroj/aktualita/2020/dopaden√≠-lupiƒçe-na-francouzsk√©-ulici"]},podm√≠nky_u≈æit√≠:{type:"object",title:"Specifikace podm√≠nek u≈æit√≠",required:["typ","autorsk√©_d√≠lo","datab√°ze_jako_autorsk√©_d√≠lo","datab√°ze_chr√°nƒõn√°_zvl√°≈°tn√≠mi_pr√°vy","osobn√≠_√∫daje"],properties:{typ:{oneOf:[{const:"Specifikace podm√≠nek u≈æit√≠"},{type:"array",contains:{const:"Specifikace podm√≠nek u≈æit√≠"},items:{type:"string"}}]},autorsk√©_d√≠lo:{type:"string",title:"Autorsk√° pr√°va",format:"iri",examples:["https://data.gov.cz/podm√≠nky-u≈æit√≠/neobsahuje-autorsk√°-d√≠la/","https://creativecommons.org/licenses/by/4.0/"]},autor:{$ref:"https://ofn.gov.cz/z√°kladn√≠-datov√©-typy/2020-07-01/sch√©mata/text.json"},datab√°ze_jako_autorsk√©_d√≠lo:{type:"string",title:"Autorskopr√°vn√≠ ochrana datab√°ze jako d√≠la",format:"iri",examples:["https://data.gov.cz/podm√≠nky-u≈æit√≠/nen√≠-autorskopr√°vnƒõ-chr√°nƒõnou-datab√°z√≠/","https://creativecommons.org/licenses/by/4.0/"]},autor_datab√°ze:{$ref:"https://ofn.gov.cz/z√°kladn√≠-datov√©-typy/2020-07-01/sch√©mata/text.json"},datab√°ze_chr√°nƒõn√°_zvl√°≈°tn√≠mi_pr√°vy:{type:"string",title:"Zvl√°≈°tn√≠ pr√°va po≈ôizovatele datab√°ze",format:"iri",examples:["https://data.gov.cz/podm√≠nky-u≈æit√≠/nen√≠-chr√°nƒõna-zvl√°≈°tn√≠m-pr√°vem-po≈ôizovatele-datab√°ze/","https://creativecommons.org/publicdomain/zero/1.0/"]},osobn√≠_√∫daje:{oneOf:[{const:"https://data.gov.cz/podm√≠nky-u≈æit√≠/neobsahuje-osobn√≠-√∫daje/"},{const:"https://data.gov.cz/podm√≠nky-u≈æit√≠/obsahuje-osobn√≠-√∫daje/"}]}}},p≈ô√≠stupov√©_url:{type:"string",format:"iri",title:"P≈ô√≠stupov√© URL",minLength:8,pattern:"^https://",examples:["https://portal.cisjr.cz/sparql"]},n√°zev:{$ref:"https://ofn.gov.cz/z√°kladn√≠-datov√©-typy/2020-07-01/sch√©mata/text.json"},pr√°vn√≠_p≈ôedpis:{type:"array",items:{type:"string",format:"iri",example:["http://data.europa.eu/eli/reg_impl/2023/138/oj","https://www.e-sbirka.cz/eli/cz/sb/1999/106/2024-01-01/dokument/norma/cast_1/par_3a/odst_6"]}}}},{oneOf:[{title:"Datov√° slu≈æba",type:"object",required:["p≈ô√≠stupov√°_slu≈æba"],properties:{p≈ô√≠stupov√°_slu≈æba:{type:"object",required:["typ","n√°zev","p≈ô√≠stupov√Ω_bod","iri"],properties:{typ:{oneOf:[{const:"Datov√° slu≈æba"},{type:"array",contains:{const:"Datov√° slu≈æba"},items:{type:"string"}}]},iri:{type:"string",format:"iri",title:"Identifik√°tor",minLength:8,pattern:"^https?://"},n√°zev:{$ref:"https://ofn.gov.cz/z√°kladn√≠-datov√©-typy/2020-07-01/sch√©mata/text.json"},p≈ô√≠stupov√Ω_bod:{type:"string",format:"iri",title:"P≈ô√≠stupov√Ω bod",minLength:8,pattern:"^https://",examples:["http://www.iana.org/assignments/media-types/image/tiff"]},specifikace:{oneOf:[{type:"string",format:"iri",title:"Specifikace",minLength:8,pattern:"^https://",examples:["https://www.w3.org/TR/sparql11-protocol/"]},{type:"array",items:{type:"string",format:"iri",title:"Specifikace",minLength:8,pattern:"^https://",examples:["https://www.w3.org/TR/sparql11-protocol/"]}}]},popis_p≈ô√≠stupov√©ho_bodu:{type:"string",format:"iri",title:"Popis p≈ô√≠stupov√©ho bodu",minLength:8,pattern:"^https://",examples:["http://www.iana.org/assignments/media-types/image/tiff"]},pr√°vn√≠_p≈ôedpis:{type:"array",items:{type:"string",format:"iri",example:["http://data.europa.eu/eli/reg_impl/2023/138/oj","https://www.e-sbirka.cz/eli/cz/sb/1999/106/2024-01-01/dokument/norma/cast_1/par_3a/odst_6"]}}}}}},{title:"Soubor ke sta≈æen√≠",type:"object",required:["form√°t","typ_m√©dia","soubor_ke_sta≈æen√≠"],properties:{form√°t:{type:"string",format:"iri",pattern:"^http\\://publications\\.europa\\.eu/resource/authority/file-type/.*$",title:"Form√°t souboru ke sta≈æen√≠",examples:["http://publications.europa.eu/resource/authority/file-type/CSV"]},typ_m√©dia:{type:"string",format:"iri",pattern:"^http\\://www\\.iana\\.org/assignments/media-types/.*$",title:"Typ m√©dia",examples:["http://www.iana.org/assignments/media-types/image/tiff"]},sch√©ma:{type:"string",format:"iri",title:"Strojovƒõ ƒçiteln√© sch√©ma souboru ke sta≈æen√≠",examples:["https://data.cssz.cz/dump/kontroly-plneni-povinnosti-zamestnavatelu-v-oblasti-socialniho-zabezpeceni-schema.json"]},typ_m√©dia_komprese:{type:"string",format:"iri",pattern:"^http\\://www\\.iana\\.org/assignments/media-types/.*$",title:"Typ m√©dia komprese",examples:["http://www.iana.org/assignments/media-types/image/tiff"]},typ_m√©dia_bal√≠ƒçku:{type:"string",format:"iri",pattern:"^http\\://www\\.iana\\.org/assignments/media-types/.*$",title:"Typ m√©dia bal√≠ƒçku",examples:["http://www.iana.org/assignments/media-types/image/tiff"]},soubor_ke_sta≈æen√≠:{type:"string",format:"iri",title:"URL Souboru ke sta≈æen√≠",minLength:8,pattern:"^https://",examples:["https://portal.cisjr.cz/pub/draha/mestske/JDF.zip"]}}}]}]}}},Ir={$schema:fa,$id:ya,type:ga,title:va,required:$a,properties:wa},ja="https://json-schema.org/draft/2020-12/schema",ba="https://ofn.gov.cz/dcat-ap-cz-rozhran√≠-katalog≈Ø-otev≈ôen√Ωch-dat/2024-05-28/sch√©mata/datov√°-s√©rie.json",ka="object",xa="Datov√° s√©rie",Sa=["@context","typ","iri","n√°zev","popis","poskytovatel","t√©ma","periodicita_aktualizace","kl√≠ƒçov√©_slovo","prvek_r√∫ian"],Ea={"@context":{const:"https://ofn.gov.cz/dcat-ap-cz-rozhran√≠-katalog≈Ø-otev≈ôen√Ωch-dat/2024-05-28/kontexty/rozhran√≠-katalog≈Ø-otev≈ôen√Ωch-dat.jsonld"},typ:{oneOf:[{const:"Datov√° s√©rie"},{type:"array",contains:{const:"Datov√° s√©rie"},items:{type:"string"}}]},iri:{type:"string",format:"iri",title:"Identifik√°tor",minLength:8,pattern:"^https://",examples:["https://www.trebic.cz/zdroj/aktualita/2020/dopaden√≠-lupiƒçe-na-francouzsk√©-ulici"]},n√°zev:{$ref:"https://ofn.gov.cz/z√°kladn√≠-datov√©-typy/2020-07-01/sch√©mata/text.json"},popis:{$ref:"https://ofn.gov.cz/z√°kladn√≠-datov√©-typy/2020-07-01/sch√©mata/text.json"},poskytovatel:{type:"string",format:"iri",title:"Poskytovatel",examples:["https://rpp-opendata.egon.gov.cz/odrpp/zdroj/org√°n-ve≈ôejn√©-moci/66003008"]},t√©ma:{type:"array",items:{type:"string",format:"iri",title:"T√©ma",examples:["http://publications.europa.eu/resource/authority/data-theme/TRAN"]},contains:{type:"string",format:"iri",title:"T√©ma",pattern:"^http\\://publications\\.europa\\.eu/resource/authority/data-theme/.*$",examples:["http://publications.europa.eu/resource/authority/data-theme/TRAN"]}},periodicita_aktualizace:{type:"string",format:"iri",title:"Periodicita aktualizace",pattern:"^http\\://publications\\.europa\\.eu/resource/authority/frequency/.*$",examples:["http://publications.europa.eu/resource/authority/frequency/MONTHLY"]},kl√≠ƒçov√©_slovo:{$ref:"https://ofn.gov.cz/z√°kladn√≠-datov√©-typy/2020-07-01/sch√©mata/v√≠ce-text≈Ø.json"},prvek_r√∫ian:{type:"array",items:{type:"string",format:"iri",title:"Souvisej√≠c√≠ geografick√© √∫zem√≠ - prvek z R√öIAN",pattern:"^https\\://linked\\.cuzk\\.cz/resource/ruian/.*$",examples:["https://linked.cuzk.cz/resource/ruian/stat/1"]}},geografick√©_√∫zem√≠:{type:"array",items:{type:"string",format:"iri",title:"Souvisej√≠c√≠ geografick√© √∫zem√≠",examples:["http://publications.europa.eu/resource/authority/continent/EUROPE"]}},ƒçasov√©_pokryt√≠:{type:"object",required:["typ"],properties:{typ:{oneOf:[{const:"ƒåasov√Ω interval"},{type:"array",contains:{const:"ƒåasov√Ω interval"},items:{type:"string"}}]},zaƒç√°tek:{type:"string",format:"date",title:"Datum zaƒç√°tku",examples:["2019-01-01+01:00"]},konec:{type:"string",format:"date",title:"Datum konce",examples:["2019-01-01+01:00"]}}},kontaktn√≠_bod:{type:"object",required:["typ"],properties:{typ:{type:"string",examples:["Organizace"]},jm√©no:{$ref:"https://ofn.gov.cz/z√°kladn√≠-datov√©-typy/2020-07-01/sch√©mata/text.json"},"e-mail":{type:"string",format:"iri",pattern:"^mailto\\:",examples:["mailto:sekretariat.190@mdcr.cz"]}}},dokumentace:{type:"string",format:"iri",title:"Dokumentace",examples:["https://www.mdcr.cz/Dokumenty/Verejna-doprava/Jizdni-rady,-kalendare-pro-jizdni-rady,-metodi-(1)/Jizdni-rady-verejne-dopravy"]},specifikace:{type:"array",items:{type:"string",format:"iri",title:"Specifikace",examples:["https://ofn.gov.cz/turistick√©-c√≠le/2020-07-01/"]}},koncept_euroVoc:{type:"array",items:{type:"string",format:"iri",pattern:"^http\\://eurovoc\\.europa\\.eu/.*$",title:"Klasifikace dle EuroVoc",examples:["http://eurovoc.europa.eu/1001"]}},prostorov√©_rozli≈°en√≠_v_metrech:{oneOf:[{type:"number",title:"Prostorov√© rozli≈°en√≠ v metrech",description:"Prostorov√© rozli≈°en√≠ v metrech jako JSON ƒç√≠slo pro zpƒõtnou kompatibilitu. Zp≈Øsobuje probl√©my s datov√Ωm typem xsd:decimal.",examples:[.5]},{type:"string",title:"Prostorov√© rozli≈°en√≠ v metrech",description:"Prostorov√© rozli≈°en√≠ v metrech jako JSON ≈ôetƒõzec. Preferovan√° varianta pro kompatibilitu s datov√Ωm typem xsd:decimal.",examples:["0.5"]}]},ƒçasov√©_rozli≈°en√≠:{type:"string",title:"ƒåasov√© rozli≈°en√≠",examples:["P1D"]},je_souƒç√°st√≠:{type:"string",format:"iri",title:"Je souƒç√°st√≠",examples:["https://lkod.mvcr.cz/zdroj/datov√©-sady/12345"]},pr√°vn√≠_p≈ôedpis:{type:"array",items:{type:"string",format:"iri",example:["http://data.europa.eu/eli/reg_impl/2023/138/oj","https://www.e-sbirka.cz/eli/cz/sb/1999/106/2024-01-01/dokument/norma/cast_1/par_3a/odst_6"]}},kategorie_hvd:{type:"array",items:{type:"string",format:"iri",pattern:"^http\\://data\\.europa\\.eu/bna/c_.*$",example:["http://data.europa.eu/bna/c_164e0bf5"]}},distribuce:!1},Tr={$schema:ja,$id:ba,type:ka,title:xa,required:Sa,properties:Ea},Ra="https://json-schema.org/draft/2020-12/schema",Ia="https://ofn.gov.cz/dcat-ap-cz-rozhran√≠-katalog≈Ø-otev≈ôen√Ωch-dat/2024-05-28/sch√©mata/katalog.json",Ta="object",Pa="Katalog",_a=["@context","typ","iri","n√°zev","popis","poskytovatel","datov√°_sada"],Oa={"@context":{const:"https://ofn.gov.cz/dcat-ap-cz-rozhran√≠-katalog≈Ø-otev≈ôen√Ωch-dat/2024-05-28/kontexty/rozhran√≠-katalog≈Ø-otev≈ôen√Ωch-dat.jsonld"},typ:{oneOf:[{const:"Katalog"},{type:"array",contains:{const:"Katalog"},items:{type:"string"}}]},iri:{type:"string",format:"iri",title:"Identifik√°tor",minLength:8,pattern:"^https?://",examples:["https://www.trebic.cz/zdroj/aktualita/2020/dopaden√≠-lupiƒçe-na-francouzsk√©-ulici"]},n√°zev:{$ref:"https://ofn.gov.cz/z√°kladn√≠-datov√©-typy/2020-07-01/sch√©mata/text.json"},popis:{$ref:"https://ofn.gov.cz/z√°kladn√≠-datov√©-typy/2020-07-01/sch√©mata/text.json"},poskytovatel:{type:"string",format:"iri",title:"Poskytovatel",examples:["https://rpp-opendata.egon.gov.cz/odrpp/zdroj/org√°n-ve≈ôejn√©-moci/66003008"]},kontaktn√≠_bod:{type:"object",required:["typ"],properties:{typ:{type:"string",examples:["Organizace"]},jm√©no:{$ref:"https://ofn.gov.cz/z√°kladn√≠-datov√©-typy/2020-07-01/sch√©mata/text.json"},"e-mail":{type:"string",format:"iri",pattern:"^mailto\\:",examples:["mailto:sekretariat.190@mdcr.cz"]}}},domovsk√°_str√°nka:{type:"string",format:"iri",title:"Domovsk√° str√°nka",minLength:8,pattern:"^https://",examples:["https://data.gov.cz/"]},datov√°_sada:{type:"array",items:{type:"string",format:"iri",minLength:8,pattern:"^https://",title:"Datov√° sada"}}},Pr={$schema:Ra,$id:Ia,type:Ta,title:Pa,required:_a,properties:Oa},Aa=[Rr,Ir,Tr,Pr],Ca=Rr.$id,za=Ir.$id,Na=Tr.$id,Da=Pr.$id,Fa="https://json-schema.org/draft/2019-09/schema",La="https://ofn.gov.cz/z√°kladn√≠-datov√©-typy/2020-07-01/sch√©mata/text.json",qa="Text",Ua="object",Ma="V√≠cejazyƒçn√Ω text",Va=[{required:["cs"],properties:{cs:{type:"string",title:"Text ƒçesky",description:"Text ƒçesky",examples:["Text ƒçesky"]}}},{required:["en"],properties:{en:{type:"string",title:"Text anglicky",description:"Text anglicky",examples:["Text in English"]}}}],Ha={type:"string"},Ja={$schema:Fa,$id:La,name:qa,type:Ua,description:Ma,anyOf:Va,additionalProperties:Ha},Ba="https://json-schema.org/draft/2019-09/schema",Wa="https://ofn.gov.cz/z√°kladn√≠-datov√©-typy/2020-07-01/sch√©mata/v√≠ce-text≈Ø.json",Ga="V√≠ce text≈Ø",Ka="object",Qa="V√≠ce v√≠cejazyƒçn√Ωch text≈Ø",Za=[{required:["cs"],properties:{cs:{anyOf:[{type:"string",title:"Text ƒçesky",description:"Text ƒçesky",examples:["Text ƒçesky"]},{type:"array",items:{type:"string",title:"Text ƒçesky",description:"Text ƒçesky",examples:["Text ƒçesky"]}}]}}},{required:["en"],properties:{en:{anyOf:[{type:"string",title:"Text anglicky",description:"Text anglicky",examples:["Text in English"]},{type:"array",items:{type:"string",title:"Text anglicky",description:"Text anglicky",examples:["Text in English"]}}]}}}],Xa={anyOf:[{type:"string"},{type:"array",items:{type:"string"}}]},Ya={$schema:Ba,$id:Wa,name:Ga,type:Ka,description:Qa,anyOf:Za,additionalProperties:Xa},ei=[Ja,Ya];function ti(e){const t=[...Aa,...ei];for(const r of t)e.addJsonSchema(r)}class ri{constructor(t,r,o){j(this,"fetchService");j(this,"jsonSchema");j(this,"logger");this.fetchService=t,this.jsonSchema=r,this.logger=o}async load(t){const r=new oi(this.fetchService,this.jsonSchema,this.logger,t);await r.load();const o=r.report;if(r.quads===null)return{catalog:{entryPoint:o,catalogs:[]},datasets:[]};let s=[];const n=new si(r.quads);await n.load(),s=n.reports;const a=[],i=this.collectDatasets(s);this.logger.startProcessing(i.length);let l=0;for(const d of i){this.logger.updateProcessing(++l);const f=new ni(this.fetchService,this.jsonSchema,this.logger,o,d);if(await f.load(),f.quads===null)a.push({entryPoint:f.report,datasets:[]});else{const h=new ai(f.quads,d);await h.load(),a.push({entryPoint:f.report,datasets:h.reports})}}return this.logger.endProcessing(),{catalog:{entryPoint:o,catalogs:s},datasets:a}}collectDatasets(t){const r=new Set;for(const o of t)for(const s of o.datasets??[])r.add(s);return[...r]}}class _r{constructor(t){j(this,"fetchService");j(this,"quads",null);this.fetchService=t}async loadEntry(t){await this.detectContentType(t);const r=t.contentType??t.contentTypeFromUrl??null;if(r!==null)switch(r){case C.JSONLD:await this.quadsFromJsonLd(t);break;case C.SPARQL:await this.quadsFromSparql(t);break;case C.TURTLE:await this.quadsFromTurtle(t);break}}async detectContentType(t){const r=await tn(this.fetchService,t.url);t.contentType=r.contentType,t.headerContentType=r.rawHeaderContentType,t.contentTypeStatusCode=r.statusCode,t.contentTypeFromUrl=r.contentTypeFromUrl}async quadsFromJsonLd(t){const r=await this.fetchService.httpGetAsJson(t.url);if(t.fetchStatusCode=r.statusCode,r.payload===null){t.failedToFetchData=!0;return}t.failedToFetchData=!1;const o=r.payload;await this.validateJsonDocument(o);try{this.quads=await Ln(o),t.conversionToRdfFailed=!1}catch(s){console.error("Conversion to RDF failed.",s),t.conversionToRdfFailed=!0}}async quadsFromSparql(t){const{endpoint:r,query:o}=this.createSparqlQuery(t.url);try{this.quads=await this.fetchService.sparqlConstruct(r,o),t.failedToFetchData=!1,t.conversionToRdfFailed=!1}catch{t.failedToFetchData=!0}}async quadsFromTurtle(t){const r=await this.fetchService.httpGetAsStream(t.url);if(t.fetchStatusCode=r.statusCode,r.payload===null){t.failedToFetchData=!0;return}t.failedToFetchData=!1;try{this.quads=await Un(r.payload.getReader(),"Turtle"),t.conversionToRdfFailed=!1}catch{t.conversionToRdfFailed=!0}}}class oi extends _r{constructor(r,o,s,n){super(r);j(this,"jsonSchema");j(this,"logger");j(this,"report");this.jsonSchema=o,this.logger=s,this.report={url:n,contentType:null,headerContentType:null,contentTypeStatusCode:null,contentTypeFromUrl:null,failedToFetchData:null,fetchStatusCode:null,conversionToRdfFailed:null,validByShacl:null,isJsonFormat:!1}}async load(){this.logger.info("logger.loading-catalog-entry-{catalog}",{catalog:this.report.url}),await super.loadEntry(this.report),this.quads!==null&&(this.report.validByShacl=await this.validateWithShacl(this.quads))}async validateJsonDocument(r){this.report.isJsonFormat=!0;const o=this.report;o.canBeCkanApi=!o.validByJsonSchema&&this.canBeCkanApi(o.url,r),o.validByJsonSchema=await this.jsonSchema.validate(Da,r)}canBeCkanApi(r,o){const s=r.endsWith("/action/package_list"),n=o.success!==void 0&&o.result!==void 0;return s&&n}async validateWithShacl(r){return await(await Vn(r)).validate(da)}createSparqlQuery(r){return{endpoint:this.report.url,query:`
PREFIX dcat: <http://www.w3.org/ns/dcat#>

CONSTRUCT {
  ?catalog ?catalogPredicate ?catalogObject .
} WHERE {
  ?catalog a dcat:Catalog ;
    ?catalogPredicate ?catalogObject .
}`}}}class si{constructor(t){j(this,"quads");j(this,"reports",[]);this.quads=t}async load(){for(const t of this.selectCatalogs())this.reports.push(await this.loadCatalog(t))}selectCatalogs(){const t=[];for(const{subject:{value:r},predicate:{value:o},object:{value:s}}of this.quads)o===Ke&&s===Bn&&t.push(r);return t}async loadCatalog(t){const r=ye(this.quads,t,Qe),o=ye(this.quads,t,Er);return{url:t,title:r,description:o,publishers:await Or(this.quads,t),datasets:await this.selectDatasets(t)}}selectDatasets(t){const r=[];for(const{subject:{value:o},predicate:{value:s},object:{value:n}}of this.quads)o===t&&s===Wn&&r.push(n);return r}}function ye(e,t,r){const o={};for(const{subject:{value:s},predicate:{value:n},object:a}of e)if(s===t&&n===r){const i=a;o[i==null?void 0:i.language]=i==null?void 0:i.value}return o}function Or(e,t){return I(e,t,Gn).map(r=>({url:r}))}function I(e,t,r){const o=[];for(const{subject:{value:s},predicate:{value:n},object:{value:a}}of e)s===t&&n===r&&o.push(a);return o}class ni extends _r{constructor(r,o,s,n,a){super(r);j(this,"jsonSchema");j(this,"logger");j(this,"catalogEntryPoint");j(this,"report");this.jsonSchema=o,this.logger=s,this.catalogEntryPoint=n,this.report={url:a,contentType:null,headerContentType:null,contentTypeStatusCode:null,contentTypeFromUrl:null,failedToFetchData:null,fetchStatusCode:null,conversionToRdfFailed:null,isJsonFormat:!1}}async load(){this.logger.info("logger.loading-dataset-entry-{dataset}",{dataset:this.report.url}),await super.loadEntry(this.report)}async detectContentType(r){if(this.catalogEntryPoint.contentType===C.SPARQL)r.contentType=C.SPARQL;else{const o=await an(this.fetchService,r.url);r.contentType=o.contentType,r.headerContentType=o.rawHeaderContentType,r.contentTypeStatusCode=o.statusCode,r.contentTypeFromUrl=o.contentTypeFromUrl}}async validateJsonDocument(r){const o=this.report;if(o.isJsonFormat=!0,o.validByHvdJsonSchema=null,o.validByDatasetJsonSchema=null,o.validBySeriesJsonSchema=null,r.typ==="Datov√° sada"){o.validByDatasetJsonSchema=await this.jsonSchema.validate(za,r);const s=r.pr√°vn√≠_p≈ôedpis??null;Array.isArray(s)&&s.findIndex(Ie)!==-1&&(o.validByHvdJsonSchema=await this.jsonSchema.validate(Ca,r))}r.typ==="Datov√° s√©rie"&&(o.validBySeriesJsonSchema=await this.jsonSchema.validate(Na,r))}createSparqlQuery(r){const o=`
    PREFIX dcat: <http://www.w3.org/ns/dcat#>
    PREFIX pu: <https://data.gov.cz/slovn√≠k/podm√≠nky-u≈æit√≠/>

    CONSTRUCT {
      <${r}> ?p ?o .
      ?distributionS ?distributionP ?distributionO .
      ?podm√≠nkyS ?podm√≠nkyP ?podm√≠nkyO .
      ?serviceS ?serviceP ?serviceO .
    } WHERE {
      <${r}> ?p ?o .

      OPTIONAL {
        <${r}> dcat:distribution ?distributionS .
        ?distributionS ?distributionP ?distributionO .
      }

      OPTIONAL {
        <${r}> dcat:distribution ?distributionS .
        ?distributionS pu:specifikace ?podm√≠nkyS .
        ?podm√≠nkyS ?podm√≠nkyP ?podm√≠nkyO .
      }

      OPTIONAL {
        <${r}> dcat:distribution ?distributionS .
        ?distributionS dcat:accessService ?serviceS .
        ?serviceS ?serviceP ?serviceO .
      }
    }`;return{endpoint:this.catalogEntryPoint.url,query:o}}}class ai{constructor(t,r){j(this,"quads");j(this,"reports",[]);j(this,"url");this.quads=t,this.url=r}load(){const t=this.selectDatasets();for(const r of t)this.reports.push(this.loadDataset(r));t.includes(this.url)||this.reports.push(this.loadDataset(this.url))}selectDatasets(){const t=[];for(const{subject:{value:r},predicate:{value:o},object:{value:s}}of this.quads)o===Ke&&s===Qt&&t.push(r);return t}loadDataset(t){const r=I(this.quads,t,Ke),o=ye(this.quads,t,Qe),s=ye(this.quads,t,Er),n=ii(this.quads,t,Qn),a=I(this.quads,t,Zn),i=I(this.quads,t,Xn),l=I(this.quads,t,Yn),d=I(this.quads,t,Be),f=I(this.quads,t,na),h=I(this.quads,t,Kn),k={url:t,hasDatasetClass:r.includes(Qt),hasDatasetSeriesClass:r.includes(sa),title:o,description:s,publishers:Or(this.quads,t),keywords:n,themes:a,accrualPeriodicities:i,spatials:l,distributions:h.map(v=>this.loadDistribution(v)),applicableLegislations:d,inSeries:f,isHighValue:!1};return d.findIndex(Ie)!==-1?this.loadHighValueDataset(k):k}loadDistribution(t){const r=I(this.quads,t,ea),o=I(this.quads,t,Be),s=I(this.quads,t,aa),n={url:t,accessURLs:I(this.quads,t,ta),termsOfUse:r,applicableLegislations:o,isHighValue:o.findIndex(Ie)!==-1,isDataServiceDistribution:!1,isFileDistribution:!1};return s.length===0?this.loadFileDistribution(n):this.loadDataServiceDistribution(n,s)}loadFileDistribution(t){const r=t.url,o=t;return o.isFileDistribution=!0,o.downloadURLs=I(this.quads,r,ia),o.mediaTypes=I(this.quads,r,ca),o.formats=I(this.quads,r,la),o}loadDataServiceDistribution(t,r){const o=r[0],s=ye(this.quads,o,Qe),n=I(this.quads,o,pa),a=I(this.quads,o,ra),i=I(this.quads,o,oa),l=I(this.quads,o,Be),d=I(this.quads,o,Zt),f=l.findIndex(Ie)!==-1,h=t;return h.isDataServiceDistribution=!0,h.accessServicesUrl=r,h.dataService={url:o,title:s,endpointURL:n,contactPoints:a,pages:i,applicableLegislations:l,hvdCategories:d,isHighValue:f},h}loadHighValueDataset(t){const r=t.url,o=I(this.quads,r,Zt);return{...t,isHighValue:!0,hvdCategories:o}}}function ii(e,t,r){const o=[];for(const{subject:{value:s},predicate:{value:n},object:a}of e)if(s===t&&n===r){const i=a;o.push({[i==null?void 0:i.language]:i==null?void 0:i.value})}return o}const ci=()=>new li;class li{constructor(){j(this,"sparqlFetcher");this.sparqlFetcher=new gs.SparqlEndpointFetcher}async sparqlAsk(t,r){return await this.sparqlFetcher.fetchAsk(t,r)}async sparqlConstruct(t,r){const o=await this.sparqlFetcher.fetchTriples(t,r);return new Promise((s,n)=>{const a=[];o.on("data",i=>a.push(i)),o.on("end",()=>s(a)),o.on("error",i=>n(i))})}async httpGet(t){let r;try{r=await fetch(t)}catch{return{payload:null,statusCode:null}}return r.ok?{payload:r,statusCode:r.status}:{payload:r,statusCode:r.status}}async httpGetAsJson(t){const r=await this.httpGet(t);if(r.payload===null)return{...r,payload:null};let o=null;try{o=await r.payload.json()}catch{}return{...r,payload:o}}async httpGetAsStream(t){const r=await this.httpGet(t);return r.payload===null?{...r,payload:null}:{...r,payload:r.payload.body}}}const _e="[a-fA-F0-9]",de="[a-zA-Z0-9-._~]",U="[!$&'()*+,;=]",oe=`%${_e}${_e}`,Ee="(?:\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])",jt=`${Ee}\\.${Ee}\\.${Ee}\\.${Ee}`,S=`${_e}{1,4}`,Y=`(?:${S}:${S}|${jt})`,pi=`(?:(?:${S}:){6}${Y}|::(?:${S}:){5}${Y}|(?:${S})?::(?:${S}:){4}${Y}|(?:(?:${S}:){0,1}${S})?::(?:${S}:){3}${Y}|(?:(?:${S}:){0,2}${S})?::(?:${S}:){2}${Y}|(?:(?:${S}:){0,3}${S})?::(?:${S}:){1}${Y}|(?:(?:${S}:){0,4}${S})?::${Y}|(?:(?:${S}:){0,5}${S})?::${S}|(?:(?:${S}:){0,6}${S})?::)`,di=`v${_e}+\\.(?:${de}|${U}|:)+`,Ar=`\\[(?:${pi}|${di})\\]`,ue="(?<scheme>[a-zA-Z][a-zA-Z0-9-+.]*)",Cr=":(?<port>\\d*)",ui=`(?:${de}|${oe}|${U})*?`,mi=`(?<host>${Ar}|${jt}|${ui})`,hi=`(?<userinfo>(?:${de}|${oe}|${U}|:)*)`,bt=`(?:${de}|${oe}|${U}|:|@)`,zr=`${bt}*?`,Nr=`(?:/${zr})*`,kt=`(?<authority>(?:${hi}@)?${mi}(?:${Cr})?)`,xt=`(?<path>${Nr})`,St=`(?<path2>${zr}${Nr})`,Et=`(?:\\?(?<query>(?:${bt}|/|\\?)*))?`,Dr=`(?:#(?<fragment>(?:${bt}|/|\\?)*))?`,Fr=`^${ue}:(?://${kt}${xt}|${St})${Et}${Dr}$`,Lr=`^(?:${ue}:|)(?://${kt}${xt}|${St})${Et}${Dr}$`,qr=`^${ue}:(?://${kt}${xt}|${St})${Et}$`,ke="[a-zA-Z0-9-._~\\00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD]",fi="[\\uE000-\\uF8FF\\uF0000-\\uFFFFD\\u100000-\\u10FFFD]",yi=`(?:${ke}|${oe}|${U})*?`,gi=`(?<host>${Ar}|${jt}|${yi})`,vi=`(?<userinfo>(?:${ke}|${oe}|${U}|:)*)`,Rt=`(?:${ke}|${oe}|${U}|:|@)`,Ur=`${Rt}*?`,Mr=`(?:/${Ur})*`,It=`(?<authority>(?:${vi}@)?${gi}(?:${Cr})?)`,Tt=`(?<path>${Mr})`,Pt=`(?<path2>${Ur}${Mr})`,_t=`(?:\\?(?<query>(?:${Rt}|${fi}|/|\\?)*))?`,Vr=`(?:#(?<fragment>(?:${Rt}|/|\\?)*))?`,Hr=`^${ue}:(?://${It}${Tt}|${Pt})${_t}${Vr}$`,Jr=`^(?:${ue}:|)(?://${It}${Tt}|${Pt})${_t}${Vr}$`,Br=`^${ue}:(?://${It}${Tt}|${Pt})${_t}$`,$i=e=>(t,r)=>{const o=e.parseReference(t);if(o.scheme===void 0){const s=e.parseAbsolute(r);o.scheme=s.scheme,o.authority===void 0&&(o.authority=s.authority,o.path===""?(o.path=s.path,o.query===void 0&&(o.query=s.query)):o.path.startsWith("/")||(o.path=wi(o.path,s)))}return Wr(e,o)},wi=(e,t)=>{if(t.authority&&t.path==="")return"/"+e;{const r=t.path.lastIndexOf("/");return r===-1?e:t.path.slice(0,r+1)+e}},ji=/^\.?\.\/|^\.\.?$/,bi=/^\/\.(?:\/|$)/,ki=/^\/\.\.(?:\/|$)/,xi=e=>{let t="";for(;e.length>0;)if(ji.test(e))e=Xt(e);else if(bi.test(e))e=Yt(e);else if(ki.test(e))e=Yt(e),t=Si(t);else{const r=Ei(e);e=Xt(e),t+=r}return t},Xt=e=>{const t=e.indexOf("/",1);return t===-1?"":"/"+e.slice(t+1)},Yt=e=>{const t=e.indexOf("/",1);return t===-1?"/":"/"+e.slice(t+1)},Si=e=>{const t=e.lastIndexOf("/");return t===-1?e:e.slice(0,t)},Ei=e=>{const t=e.indexOf("/",1);return t===-1?e:e.slice(0,t)},Wr=(e,t)=>{let r=t.scheme.toLowerCase()+":";return r+=t.authority===void 0?"":"//"+t.authority.toLowerCase(),r+=e.normalizePath(t.path),r+=t.query===void 0?"":"?"+e.normalizeQuery(t.query),r+=t.fragment===void 0?"":"#"+e.normalizeFragment(t.fragment),r},Gr=new RegExp(oe,"g"),Kr=e=>t=>{const r=parseInt(t.slice(1),16),o=String.fromCharCode(r);return e(o)?o:t.toUpperCase()},Ri=RegExp.prototype.test.bind(new RegExp(`${de}|${U}|[:@]`)),Ii=RegExp.prototype.test.bind(new RegExp(`${ke}|${U}|[:@]`)),er=e=>t=>xi(t).replaceAll(Gr,Kr(e)),tr=RegExp.prototype.test.bind(new RegExp(`${de}|${U}|[:@/?]`)),rr=RegExp.prototype.test.bind(new RegExp(`${ke}|${U}|[:@/?]`)),Re=e=>t=>t.replaceAll(Gr,Kr(e));RegExp.prototype.test.bind(new RegExp(Fr));RegExp.prototype.test.bind(new RegExp(Lr));RegExp.prototype.test.bind(new RegExp(qr));RegExp.prototype.test.bind(new RegExp(Hr));RegExp.prototype.test.bind(new RegExp(Jr));RegExp.prototype.test.bind(new RegExp(Br));const me=(e,t)=>r=>{const o=e.exec(r);if(o===null)throw Error(`Invalid ${t}: ${r}`);return o.groups.authority===void 0&&(o.groups.path=o.groups.path2),delete o.groups.path2,o.groups},Ti=me(new RegExp(Fr),"URI"),Pi=me(new RegExp(Lr),"URI-reference"),_i=me(new RegExp(qr),"absolute-URI"),Qr=me(new RegExp(Hr),"IRI"),Ot=me(new RegExp(Jr),"IRI-reference"),Oi=me(new RegExp(Br),"absolute-IRI"),Zr={uri:{parseAbsolute:_i,parseReference:Pi,parse:Ti,normalizePath:er(Ri),normalizeQuery:Re(tr),normalizeFragment:Re(tr)},iri:{parseAbsolute:Oi,parseReference:Ot,parse:Qr,normalizePath:er(Ii),normalizeQuery:Re(rr),normalizeFragment:Re(rr)}},Ai=e=>t=>{const r=e.parse(t);return delete r.fragment,Wr(e,r)},M=Ai(Zr.iri),ce=$i(Zr.iri),Ci="",Ze=function*(e){if(e.length>0&&e[0]!=="/")throw Error("Invalid JSON Pointer");let t=1,r=0;for(;r<e.length;){const o=e.indexOf("/",t);r=o===-1?e.length:o;const s=e.slice(t,r);t=r+1,yield Di(s)}},zi=(e,t=void 0)=>{if(t===void 0){const r=[...Ze(e)];return o=>or(r,o)}else return or(Ze(e),t)},or=(e,t)=>{let r=Ci;for(const o of e)t=Li(t,o,r),r=te(o,r);return t},te=(e,t)=>t+"/"+Ni(e),Ni=e=>e.toString().replace(/~/g,"~0").replace(/\//g,"~1"),Di=e=>e.toString().replace(/~1/g,"/").replace(/~0/g,"~"),Fi=(e,t)=>Array.isArray(e)&&t==="-"?e.length:t,Li=(e,t,r="")=>{if(e===void 0)throw TypeError(`Value at '${r}' is undefined and does not have property '${t}'`);if(e===null)throw TypeError(`Value at '${r}' is null and does not have property '${t}'`);if(qi(e))throw TypeError(`Value at '${r}' is a ${typeof e} and does not have property '${t}'`);{const o=Fi(e,t);return e[o]}},qi=e=>e===null||typeof e!="object",Xr=e=>{const t=typeof e;switch(t){case"number":case"string":case"boolean":case"undefined":return t;case"object":if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)===Object.prototype)return"object";default:const r=t==="object"?Object.getPrototypeOf(e).constructor.name||"anonymous":t;throw Error(`Not a JSON compatible type: ${r}`)}},Yr=e=>{const t=e.indexOf("#"),r=t===-1?e.length:t;return e.slice(0,r)},eo=e=>decodeURIComponent(Ot(e).fragment||""),Oe={},De=e=>{if(e.indexOf("#")!==-1){const t=Yr(e);return{...Oe[t],id:e}}return Oe[e]},Ui=(e,t)=>{const r=Mi(e,t);if(!r)throw Error(`Encountered unknown keyword '${e}'`);const o=De(r);if(!o)throw Error(`Encountered unsupported keyword ${e}. You can provide an implementation for the '${r}' keyword using the 'addKeyword' function.`);return o},u=e=>{Oe[e.id]=e},Xe={},R=(e,t)=>{Xe[e]=t},ae={},At={},Mi=(e,t)=>{var r;return((r=to(t))==null?void 0:r[e])||(At[t]||e.startsWith("x-"))&&`https://json-schema.org/keyword/unknown#${e}`},E=(e,t)=>{const r=to(e);for(const o in r)if(r[o]===t)return o},to=e=>{if(!(e in ae))throw Error(`Encountered unknown dialect '${e}'`);return ae[e]},Fe=(e,t,r=!1)=>{At[e]=r,ae[e]={},Object.entries(t).forEach(([o,s])=>{if(o in Xe)Object.entries(Xe[o]).forEach(([n,a])=>{!(a in Oe)&&!s&&(a=`https://json-schema.org/keyword/unknown#${n}`),ae[e][n]=a});else if(!r||s)throw delete ae[e],Error(`Unrecognized vocabulary: ${o}. You can define this vocabulary with the 'defineVocabulary' function.`)})},Vi=e=>{delete At[e],delete ae[e]};var Ct={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var sr=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,Hi=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,ro=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,Ji=/\\([\u000b\u0020-\u00ff])/g,Bi=/([\\"])/g,oo=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;Ct.format=Gi;var Wi=Ct.parse=Ki;function Gi(e){if(!e||typeof e!="object")throw new TypeError("argument obj is required");var t=e.parameters,r=e.type;if(!r||!oo.test(r))throw new TypeError("invalid type");var o=r;if(t&&typeof t=="object")for(var s,n=Object.keys(t).sort(),a=0;a<n.length;a++){if(s=n[a],!ro.test(s))throw new TypeError("invalid parameter name");o+="; "+s+"="+Zi(t[s])}return o}function Ki(e){if(!e)throw new TypeError("argument string is required");var t=typeof e=="object"?Qi(e):e;if(typeof t!="string")throw new TypeError("argument string is required to be a string");var r=t.indexOf(";"),o=r!==-1?t.slice(0,r).trim():t.trim();if(!oo.test(o))throw new TypeError("invalid media type");var s=new Xi(o.toLowerCase());if(r!==-1){var n,a,i;for(sr.lastIndex=r;a=sr.exec(t);){if(a.index!==r)throw new TypeError("invalid parameter format");r+=a[0].length,n=a[1].toLowerCase(),i=a[2],i.charCodeAt(0)===34&&(i=i.slice(1,-1),i.indexOf("\\")!==-1&&(i=i.replace(Ji,"$1"))),s.parameters[n]=i}if(r!==t.length)throw new TypeError("invalid parameter format")}return s}function Qi(e){var t;if(typeof e.getHeader=="function"?t=e.getHeader("content-type"):typeof e.headers=="object"&&(t=e.headers&&e.headers["content-type"]),typeof t!="string")throw new TypeError("content-type header is missing from object");return t}function Zi(e){var t=String(e);if(ro.test(t))return t;if(t.length>0&&!Hi.test(t))throw new TypeError("invalid parameter value");return'"'+t.replace(Bi,"\\$1")+'"'}function Xi(e){this.parameters=Object.create(null),this.type=e}const ve={},so=(e,t)=>{ve[e]=t},Yi=e=>{const t=e.headers.get("content-type");if(t===null)throw new rc("The media type of the response could not be determined. Make sure the response includes a 'Content-Type' header.",{cause:e});const r=Wi(t);if(!(r.type in ve))throw new tc(r.type,`'${r.type}' is not supported. Use the 'addMediaTypePlugin' function to add support for this media type.`,{cause:e});return ve[r.type].parse(e)},ec=()=>{let e="";for(const t in ve)e=nr(e,t,ve[t].quality);return nr(e,"*/*","0.001")},nr=(e,t,r)=>(e.length>0&&(e+=", "),e+=t,r&&(e+=`; q=${r}`),e);class tc extends Error{constructor(t,r=void 0){super(r),this.name=this.constructor.name,this.mediaType=t}}class rc extends Error{constructor(t=void 0){super(t),this.name=this.constructor.name}}const oc=(e,t=void 0)=>JSON.parse(e,(r,o)=>{const s=o!==null&&typeof o.$ref=="string"?new ee(o.$ref):o;return t?t(r,s):s});var we,je;class ee{constructor(t,r=void 0){Ve(this,we);Ve(this,je);He(this,we,t),He(this,je,r??{$ref:t})}get href(){return Me(this,we)}toJSON(){return Me(this,je)}}we=new WeakMap,je=new WeakMap;const no=e=>{const t=typeof e;switch(t){case"bigint":return"number";case"number":case"string":case"boolean":case"undefined":return t;case"object":if(e instanceof ee)return"reference";if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)return"object";default:const r=t==="object"?Object.getPrototypeOf(e).constructor.name||"anonymous":t;throw Error(`Not a JRef compatible type: ${r}`)}},sc={parse:async e=>({baseUri:e.url,root:oc(await e.text()),anchorLocation:nc}),fileMatcher:e=>e.endsWith(".jref")},nc=e=>decodeURI(e||""),Ye={},ao=(e,t)=>{Ye[e]=t},ac=(e,t)=>{e=ce(e,t);const{scheme:r}=Ot(e);if(!(r in Ye))throw new ic(r,`The '${r}:' URI scheme is not supported. Use the 'addUriSchemePlugin' function to add support for '${r}:' URIs.`);return Ye[r].retrieve(e,t)};class ic extends Error{constructor(t,r=void 0){super(r),this.name=this.constructor.name,this.scheme=t}}const cc=new Set([200,203]),lc=async e=>{const t=await fetch(e,{headers:{Accept:ec()}});if(t.status>=400)throw new ar(t,`Failed to retrieve '${e}'`);if(!cc.has(t.status))throw new ar(t,"Unsupported HTTP response status code");return t},io={retrieve:lc};class ar extends Error{constructor(t,r=void 0){super(`${t.status} ${t.statusText}${r?` -- ${r}`:""}`),this.name=this.constructor.name,this.response=t}}var H=pc;function pc(e,t){return function r(){t==null&&(t=e.length);var o=[].slice.call(arguments);return o.length>=t?e.apply(this,o):function(){return r.apply(this,o.concat([].slice.call(arguments)))}}}const dc=()=>{var e,t;return((t=(e=globalThis.document)==null?void 0:e.location)==null?void 0:t.toString())??""},Le=async(e,t={_cache:{}})=>{var a,i,l;const r=((a=t.document)==null?void 0:a.baseUri)??dc();e=ce(e,r);const o=M(e),{fragment:s}=Qr(e),n=t._cache[o]??((l=(i=t.document)==null?void 0:i.embedded)==null?void 0:l[o]);if(n)t.document=n,t.uri=e,t.cursor=t.document.anchorLocation(s);else{try{const d=await ac(e,r);t.document=await Yi(d),t.uri=d.url+(s===void 0?"":`#${s}`),t.cursor=t.document.anchorLocation(s)}catch(d){const f=t.uri?` Referenced from '${t.uri}'.`:"";throw new mc(`Unable to load resource '${e}'.${f}`,d)}t._cache[o]=t.document}return t._value=zi(t.cursor,t.document.root),co(t)},co=e=>no(y(e))==="reference"?Le(y(e).href,e):e,y=e=>e._value,q=e=>no(e._value),lo=(e,t)=>e in t._value,zt=e=>e._value.length,z=H((e,t)=>co({...t,cursor:te(`${e}`,t.cursor),_value:t._value[e]})),J=async function*(e){for(let t=0;t<y(e).length;t++)yield z(t,e)},et=function*(e){for(const t in y(e))yield t},uc=async function*(e){for(const t in y(e))yield z(t,e)},re=async function*(e){for(const t in y(e))yield[t,await z(t,e)]};class mc extends Error{constructor(t,r){super(t,{cause:r}),this.name=this.constructor.name}}so("application/reference+json",sc);ao("http",io);ao("https",io);const hc={parse:async e=>{const t=Ct.parse(e.headers.get("content-type")??""),r=t.parameters.schema??t.parameters.profile;return Ae(await e.json(),e.url,r)},fileMatcher:e=>/(\.|\/)schema\.json$/.test(e)},$e={},po=async(e,t=void 0)=>{t||(t={_cache:{}});for(const o in $e)o in t._cache||(t._cache[o]=$e[o]);const r=await Le(e,{...t});if(typeof r.document.dialectId!="string")throw Error(`The document at ${r.document.baseUri} is not a schema.`);return r},w=(e,t,r)=>{e=structuredClone(e);const o=Ae(e,t,r);if(o.baseUri in $e)throw Error(`A schema has already been registered for '${o.baseUri}. You can use 'unregisterSchema' to remove the old schema before registering the new one.`);if(o.baseUri.startsWith("file:"))throw Error(`Registering a schema with a 'file:' URI scheme is not allowed: ${o.baseUri}`);$e[t?M(t):o.baseUri]=o},fc=e=>{const t=M(e);Vi(t),delete $e[t]},Ae=(e,t,r,o={})=>{if(typeof e.$schema=="string"&&(r=e.$schema,delete e.$schema),!r)throw Error("Unable to determine a dialect for the schema. The dialect can be declared in a number of ways, but the recommended way is to use the '$schema' keyword in your schema.");r=M(r);const s=E(r,"https://json-schema.org/keyword/draft-04/id"),n=E(r,"https://json-schema.org/keyword/id")||s;if(!e[n]&&!t)throw Error(`Unable to determine an identifier for the schema. Use the '${n}' keyword or pass a retrievalUri when loading the schema.`);const a=ce(e[n]??"",t??"");t=M(a),s&&a.length>t.length?e[n]="#"+eo(a):delete e[n];const i=E(r,"https://json-schema.org/keyword/vocabulary");if(Xr(e[i])==="object"){const h=e[i]["https://json-schema.org/draft/2019-09/vocab/core"]||e[i]["https://json-schema.org/draft/2020-12/vocab/core"];Fe(t,e[i],h),delete e[i]}const l={"":""},d={},f=E(r,"https://json-schema.org/keyword/draft-2019-09/recursiveAnchor");return e[f]===!0&&(d[""]=`${t}#`),delete e[f],o[t]={baseUri:t,dialectId:r,root:tt(e,t,r,"",o,l,d),anchorLocation:h=>{if(h===void 0)return"";if(h=decodeURI(h),h[0]==="/")return h;if(h in l)return l[h];throw Error(`No such anchor '${t}#${encodeURI(h)}'`)},anchors:l,dynamicAnchors:d,embedded:o},o[t]},tt=(e,t,r,o,s,n,a)=>{if(Xr(e)==="object"){const i=typeof e.$schema=="string"?M(e.$schema):r,l=E(i,"https://json-schema.org/keyword/id");if(typeof e[l]=="string"){const v=M(ce(e[l],t));return e[l]=v,s[v]=Ae(e,v,i,s),new ee(v,{})}const d=E(i,"https://json-schema.org/keyword/draft-04/id");if(typeof e[d]=="string")if(e[d][0]==="#"){const v=decodeURIComponent(e[d].slice(1));n[v]=o,delete e[d]}else{const v=M(ce(e[d],t));return e[d]=v,s[v]=Ae(e,v,i,s),new ee(v,{})}const f=E(r,"https://json-schema.org/keyword/draft-04/ref");if(typeof e[f]=="string")return new ee(e[f],e);const h=E(r,"https://json-schema.org/keyword/anchor");typeof e[h]=="string"&&(n[e[h]]=o,delete e[h]);const k=E(r,"https://json-schema.org/keyword/dynamicAnchor");typeof e[k]=="string"&&(a[e[k]]=`${t}#${encodeURI(o)}`,delete e[k]);const x=E(r,"https://json-schema.org/keyword/draft-2020-12/dynamicAnchor");typeof e[x]=="string"&&(a[e[x]]=`${t}#${encodeURI(o)}`,n[e[x]]=o,delete e[x]);for(const v in e){const P=E(r,"https://json-schema.org/keyword/ref");v===P&&typeof e[v]=="string"?e[v]=new ee(e[v],e[v]):e[v]=tt(e[v],t,r,te(v,o),s,n,a)}}else if(Array.isArray(e))for(let i=0;i<e.length;i++)e[i]=tt(e[i],t,r,te(i,o),s,n,a);return e},le=e=>`${e.document.baseUri}#${encodeURI(e.cursor)}`,uo=H(function*(e,t){for(const r of t)yield e(r)}),O=H(async function*(e,t){for await(const r of t)yield e(r)}),mo=H(function*(e,t){for(const r of t)e(r)&&(yield r)}),ho=H(function*(e,t){let r=0;for(const o of t)r++>=e&&(yield o)}),yc=H(function*(e,t){var s;const r=yo(t);let o;for(;e-- >0&&!((s=o=r.next())!=null&&s.done);)yield o.value}),gc=e=>{const r=yo(e).next();return r.done?void 0:r.value},Ce=function*(e,t){for(let r=e;r<t||t===void 0;r++)yield r},ir=function*(){},qe=function*(e,t){for(const r of e)yield[r,t.next().value]},vc=function*(...e){for(const t of e)yield*t},fo=H((e,t,r)=>{for(const o of r)t=e(t,o);return t}),rt=H((e,t)=>{for(const r of t)if(!e(r))return!1;return!0}),F=async e=>{const t=[];for await(const r of e)t.push(r);return t},ot=e=>{const t=new Set;for(const r of e)t.add(r);return t},st=async e=>{const t=Object.create(null);for await(const[r,o]of e)t[r]=o;return t},$c=H((e,t)=>{let r=gc(t)||"";for(const o of t)r+=e+o;return r}),yo=e=>{if(typeof(e==null?void 0:e[Symbol.iterator])=="function")return e[Symbol.iterator]();throw TypeError("`iter` is not iterable")},T=(e,...t)=>fo((r,o)=>o(r),e,t),ge=(e,t="",r="",o=void 0)=>{const s=typeof e;switch(s){case"number":case"string":case"boolean":return he(t,r,e,s,[],o);case"object":if(e===null)return he(t,r,e,"null",[],o);if(Array.isArray(e)){const a=he(t,r,e,"array",[],o);return a.children=e.map((i,l)=>ge(i,t,te(l,r),a)),a}else if(Object.getPrototypeOf(e)===Object.prototype){const a=he(t,r,e,"object",[],o);return a.children=Object.entries(e).map(i=>{const l=te(i[0],r),d=he(t,l,void 0,"property",[],a);return d.children=i.map(f=>ge(f,t,l,d)),d}),a}else if(e instanceof ee)return ge(e.toJSON(),t,r,o);default:const n=s==="object"?Object.getPrototypeOf(e).constructor.name||"anonymous":s;throw Error(`Not a JSON compatible type: ${n}`)}},he=(e,t,r,o,s,n)=>{const a={baseUri:e?M(e):"",pointer:t,value:r,type:o,children:s,parent:n,valid:!0,errors:{},annotations:{}};return a.root=(n==null?void 0:n.root)??a,a},wc=e=>`${e.baseUri}#${encodeURI(e.pointer)}`,b=e=>e.value,g=e=>e.type,pe=(e,t)=>e in t.value,V=function*(e){e.type==="array"&&(yield*e.children)},Nt=function*(e){if(e.type==="object")for(const t of e.children)yield t.children[0]},jc=function*(e){if(e.type==="object")for(const t of e.children)t.children[1]&&(yield t.children[1])},Q=function*(e){if(e.type==="object")for(const t of e.children)t.children.length===2&&(yield t.children)},Z=e=>{if(e.type==="array")return e.children.length},nt=function*(e){switch(yield e,g(e)){case"object":for(const t of jc(e))yield*nt(t);break;case"array":for(const t of V(e))yield*nt(t);break}},ie={};let bc=0;const kc=(e,t)=>{e in ie||(ie[e]={});const r=`pubsub_subscription_${bc++}`;return ie[e][r]=t,r},xc=async(e,t)=>{const r=[];for(const o in ie)if(o===e||e.startsWith(`${o}.`))for(const s in ie[o])r.push(ie[e][s](e,t));await Promise.all(r)};let go;const Sc=()=>go,Ec=e=>{go=e};class Rc extends Error{constructor(t){super("Invalid Schema"),this.name=this.constructor.name,this.output=t}}const vo="https://json-schema.org/evaluation/validate",Ic=async(e,t)=>{await xc("validate.metaValidate",e),e.document.baseUri in t.metaData||(t.metaData[e.document.baseUri]={dynamicAnchors:e.document.dynamicAnchors});const r=le(e);if(!(r in t)){t[r]=!1;const o=y(e);if(!["object","boolean"].includes(typeof o))throw Error(`No schema found at '${r}'`);t[r]=typeof o=="boolean"?o:await T(re(e),O(async([s,n])=>{const a=Ui(s,e.document.dialectId),i=await a.compile(n,t,e);return[a.id,te(s,le(e)),i]}),F)}return r},Tc=(e,t,r,o,s=!1)=>{o={...r.metaData[Yr(e)].dynamicAnchors,...o};let n=!0;if(typeof r[e]=="boolean")n=r[e];else for(const[a,i,l]of r[e])t.valid=De(a).interpret(l,t,r,o,s,e),t.valid||(s||(t.errors[i]=a),n=!1);return n||(t.errors[e]=vo),t.valid=n,n},Pc=new Set,_c=(e,t,r,o,s=!1)=>{if(typeof r[e]=="boolean")return r[e]?new Set:!1;const n=new Set;for(const[a,,i]of r[e]){if(s&&a==="https://json-schema.org/keyword/unevaluatedProperties")continue;const l=De(a),d="collectEvaluatedProperties"in l?l.collectEvaluatedProperties(i,t,r,o,s):l.interpret(i,t,r,o,!0)&&Pc;if(d===!1)return!1;d.forEach(n.add,n)}return n},Oc=new Set,Ac=(e,t,r,o,s=!1)=>{if(typeof r[e]=="boolean")return r[e]?new Set:!1;const n=new Set;for(const[a,,i]of r[e]){if(s&&a==="https://json-schema.org/keyword/unevaluatedItems")continue;const l=De(a),d="collectEvaluatedItems"in l?l.collectEvaluatedItems(i,t,r,o,s):l.interpret(i,t,r,o,!0)&&Oc;if(d===!1)return!1;d.forEach(n.add,n)}return n},p={id:vo,compile:Ic,interpret:Tc,collectEvaluatedProperties:_c,collectEvaluatedItems:Ac},ze={},Cc=(e,t)=>{if(t in ze)return ze[t](e);throw Error(`The '${t}' error format is not supported`)};ze.FLAG=e=>({valid:e.valid});ze.BASIC=e=>{const t={valid:e.valid};if(!e.valid){t.errors=[];for(const r of nt(e))for(const[o,s]of Object.entries(r.errors).reverse())s!=="https://json-schema.org/evaluation/validate"&&!r.valid&&t.errors.unshift({keyword:s,absoluteKeywordLocation:o,instanceLocation:wc(r),valid:r.valid})}return t};const $o="FLAG",zc="BASIC";Ec($o);const Nc=async(e,t=void 0,r=void 0)=>{const o=await po(e),s=await wo(o),n=(a,i)=>jo(s,ge(a),i);return t===void 0?n:n(t,r)},wo=async e=>{const t={metaData:{}},r=await p.compile(e,t);return{ast:t,schemaUri:r}},jo=H(({ast:e,schemaUri:t},r,o=$o)=>(p.interpret(t,r,e,{}),Cc(r,o))),Te={};kc("validate.metaValidate",async(e,t)=>{if(!t.document.validated){if(t.document.validated=!0,!(t.document.dialectId in Te)){const s=await po(t.document.dialectId,t),n=await wo(s);Te[t.document.dialectId]=jo(n)}const r=ge(t.document.root,t.document.baseUri),o=Te[t.document.dialectId](r,Sc());if(!o.valid)throw new Rc(o)}});const cr=(e,t=void 0,r=void 0)=>{const o=typeof e.$schema=="string"?M(e.$schema):r,s=E(o,"https://json-schema.org/keyword/id")||E(o,"https://json-schema.org/keyword/draft-04/id"),n=typeof e[s]=="string"?ce(e[s],t):t;Dc(n),w(e,t,r)},Dc=e=>{fc(e),delete Te[e]},Fc="https://json-schema.org/keyword/additionalProperties",Lc=async(e,t,r)=>{const o=E(e.document.dialectId,"https://json-schema.org/keyword/properties"),s=await z(o,r),n=q(s)==="object"?uo(f=>"^"+qc(f)+"$",et(s)):ir(),a=E(e.document.dialectId,"https://json-schema.org/keyword/patternProperties"),i=await z(a,r),l=q(i)==="object"?et(i):ir(),d=T(vc(n,l),$c("|"))||"(?!)";return[new RegExp(d,"u"),await p.compile(e,t)]},qc=e=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),Uc=([e,t],r,o,s,n)=>{if(g(r)!=="object")return!0;let a=!0;for(const[i,l]of Q(r)){const d=b(i);!e.test(d)&&!p.interpret(t,l,o,s,n)&&(a=!1)}return a},Mc=([e,t],r,o,s)=>{if(g(r)!=="object")return!0;const n=new Set;for(const[a,i]of Q(r)){const l=b(a);if(!e.test(l)){if(!p.interpret(t,i,o,s,!0))return!1;n.add(l)}}return n},Vc={id:Fc,compile:Lc,interpret:Uc,collectEvaluatedProperties:Mc},Hc="https://json-schema.org/keyword/allOf",Jc=(e,t)=>T(J(e),O(r=>p.compile(r,t)),F),Bc=(e,t,r,o,s)=>{let n=!0;for(const a of e)p.interpret(a,t,r,o,s)||(n=!1);return n},Wc=(e,t,r,o)=>{const s=new Set;for(const n of e){const a=p.collectEvaluatedProperties(n,t,r,o);if(!a)return!1;a.forEach(s.add,s)}return s},Gc=(e,t,r,o)=>{const s=new Set;for(const n of e){const a=p.collectEvaluatedItems(n,t,r,o);if(!a)return!1;a.forEach(s.add,s)}return s},Kc={id:Hc,compile:Jc,interpret:Bc,collectEvaluatedProperties:Wc,collectEvaluatedItems:Gc},Qc={id:"https://json-schema.org/keyword/anchor"},Zc="https://json-schema.org/keyword/anyOf",Xc=(e,t)=>T(J(e),O(r=>p.compile(r,t)),F),Yc=(e,t,r,o,s)=>e.filter(a=>p.interpret(a,t,r,o,s)).length>0,el=(e,t,r,o)=>{let s=!1;for(const n of e){const a=p.collectEvaluatedProperties(n,t,r,o);a&&(s||(s=new Set),a.forEach(s.add,s))}return s},tl=(e,t,r,o)=>{let s=!1;for(const n of e){const a=p.collectEvaluatedItems(n,t,r,o);a&&(s||(s=new Set),a.forEach(s.add,s))}return s},rl={id:Zc,compile:Xc,interpret:Yc,collectEvaluatedProperties:el,collectEvaluatedItems:tl},ol="https://json-schema.org/keyword/conditional",sl=(e,t)=>T(J(e),bo,O(r=>p.compile(r,t)),F),nl=(e,t,r,o,s)=>{for(let n=0;n<e.length;n+=2){const a=p.interpret(e[n],t,r,o,s);if(n+1===e.length)return a;if(a)return p.interpret(e[n+1],t,r,o,s)}return!0},al=(e,t,r,o)=>{for(let s=0;s<e.length;s+=2){const n=p.collectEvaluatedProperties(e[s],t,r,o);if(s+1===e.length)return n;if(n!==!1)return p.collectEvaluatedProperties(e[s+1],t,r,o)}return new Set},il=(e,t,r,o)=>{for(let s=0;s<e.length;s+=2){const n=p.collectEvaluatedItems(e[s],t,r,o);if(s+1===e.length)return n;if(n!==!1)return p.collectEvaluatedItems(e[s+1],t,r,o)}return new Set},bo=async function*(e,t=1){for await(const r of e)t>0&&q(r)==="array"?yield*bo(J(r),t-1):yield r},cl={id:ol,compile:sl,interpret:nl,collectEvaluatedProperties:al,collectEvaluatedItems:il};var ll={space:"",cycles:!1,replacer:(e,t)=>t,stringify:JSON.stringify},se={isArray:Array.isArray,assign:Object.assign,isObject:e=>typeof e=="object",isFunction:e=>typeof e=="function",isBoolean:e=>typeof e=="boolean",isRegex:e=>e instanceof RegExp,keys:Object.keys};const fe=ll,pl=se.isFunction,dl=se.isBoolean,ul=se.isObject,ml=se.isArray,hl=se.isRegex,fl=se.assign,yl=se.keys;function gl(e){return e==null?e:hl(e)?e.toString():e.toJSON?e.toJSON():e}function vl(e,t){t=t||fl({},fe),pl(t)&&(t={compare:t});const r=t.space||fe.space,o=dl(t.cycles)?t.cycles:fe.cycles,s=t.replacer||fe.replacer,n=t.stringify||fe.stringify,a=t.compare&&function(l){return function(d){return function(f,h){const k={key:f,value:d[f]},x={key:h,value:d[h]};return l(k,x)}}}(t.compare);o||n(e);const i=[];return function l(d,f,h,k){const x=r?`
`+new Array(k+1).join(r):"",v=r?": ":":";if(h=gl(h),h=s.call(d,f,h),h!==void 0){if(!ul(h)||h===null)return n(h);if(ml(h)){const P=[];for(let $=0;$<h.length;$++){const X=l(h,$,h[$],k+1)||n(null);P.push(x+r+X)}return"["+P.join(",")+x+"]"}else{if(o){if(i.indexOf(h)!==-1)return n("[Circular]");i.push(h)}const P=yl(h).sort(a&&a(h)),$=[];for(let X=0;X<P.length;X++){const Ue=P[X],Vt=l(h,Ue,h[Ue],k+1);if(!Vt)continue;const Bo=n(Ue)+v+Vt;$.push(x+r+Bo)}return i.splice(i.indexOf(h),1),"{"+$.join(",")+x+"}"}}}({"":e},"",e,0)}var $l=vl;const xe=Xo($l),wl="https://json-schema.org/keyword/const",jl=e=>xe(y(e)),bl=(e,t)=>xe(b(t))===e,kl={id:wl,compile:jl,interpret:bl},xl="https://json-schema.org/keyword/contains",Sl=async(e,t,r)=>{const o=await p.compile(e,t),s=E(e.document.dialectId,"https://json-schema.org/keyword/minContains"),n=await z(s,r),a=q(n)==="number"?y(n):1,i=E(e.document.dialectId,"https://json-schema.org/keyword/maxContains"),l=await z(i,r),d=q(l)==="number"?y(l):Number.MAX_SAFE_INTEGER;return{contains:o,minContains:a,maxContains:d}},ko=({contains:e,minContains:t,maxContains:r},o,s,n,a)=>{const i=g(o)!=="array"||T(V(o),mo(l=>p.interpret(e,l,s,n,a)),fo(l=>l+1,0));return i>=t&&i<=r},El=(e,t,r,o)=>ko(e,t,r,o,!0)&&g(t)==="array"&&T(qe(V(t),Ce(0)),mo(([s])=>p.interpret(e.contains,s,r,o,!0)),uo(([,s])=>s),ot),Rl={id:xl,compile:Sl,interpret:ko,collectEvaluatedItems:El},Il="https://json-schema.org/keyword/comment",Tl=()=>{},Pl=()=>!0,_l={id:Il,compile:Tl,interpret:Pl},L=(e,t,r,o)=>{t in e.annotations||(e.annotations[t]={}),e.annotations[t][r]=o},xo="https://json-schema.org/keyword/contentEncoding",Ol=e=>y(e),Al=(e,t,r,o,s,n)=>(L(t,xo,n,e),!0),Cl={id:xo,compile:Ol,interpret:Al},So="https://json-schema.org/keyword/contentMediaType",zl=e=>y(e),Nl=(e,t,r,o,s,n)=>(L(t,So,n,e),!0),Dl={id:So,compile:zl,interpret:Nl},Eo="https://json-schema.org/keyword/contentSchema",Fl=e=>le(e),Ll=(e,t,r,o,s,n)=>(L(t,Eo,n,e),!0),ql={id:Eo,compile:Fl,interpret:Ll},Ro="https://json-schema.org/keyword/default",Ul=e=>y(e),Ml=(e,t,r,o,s,n)=>(L(t,Ro,n,e),!0),Vl={id:Ro,compile:Ul,interpret:Ml},Hl="https://json-schema.org/keyword/definitions",Jl=(e,t)=>T(uc(e),O(r=>p.compile(r,t)),F),Bl=()=>!0,Wl={id:Hl,compile:Jl,interpret:Bl},Gl="https://json-schema.org/keyword/dependentRequired",Kl=e=>T(re(e),O(([t,r])=>[t,y(r)]),F),Ql=(e,t)=>{if(g(t)!=="object")return!0;let r=!0;for(const[o,s]of e)pe(o,t)&&!s.every(n=>pe(n,t))&&(r=!1);return r},Zl={id:Gl,compile:Kl,interpret:Ql},Xl="https://json-schema.org/keyword/dependentSchemas",Yl=(e,t)=>T(re(e),O(async([r,o])=>[r,await p.compile(o,t)]),F),ep=(e,t,r,o,s)=>{if(g(t)!=="object")return!0;let n=!0;for(const[a,i]of e)pe(a,t)&&!p.interpret(i,t,r,o,s)&&(n=!1);return n},tp=(e,t,r,o)=>{if(g(t)!=="object")return!1;const s=new Set;for(const[n,a]of e)if(pe(n,t)){const i=p.collectEvaluatedProperties(a,t,r,o);if(i===!1)return!1;i.forEach(Set.prototype.add.bind(s))}return s},rp={id:Xl,compile:Yl,interpret:ep,collectEvaluatedProperties:tp},Io="https://json-schema.org/keyword/deprecated",op=e=>y(e),sp=(e,t,r,o,s,n)=>(L(t,Io,n,e),!0),np={id:Io,compile:op,interpret:sp},To="https://json-schema.org/keyword/description",ap=e=>y(e),ip=(e,t,r,o,s,n)=>(L(t,To,n,e),!0),cp={id:To,compile:ap,interpret:ip},lp={id:"https://json-schema.org/keyword/dynamicAnchor"},pp="https://json-schema.org/keyword/dynamicRef",dp=async(e,t)=>{const r=y(e),o=await Le(e.document.baseUri,e);return await p.compile(o,t),r},Dt=e=>(t,r,o,s,n)=>{if(!(t in s))throw Error(`No dynamic anchor found for "${t}"`);return e(s[t],r,o,s,n)},up=Dt(p.interpret),mp=Dt(p.collectEvaluatedProperties),hp=Dt(p.collectEvaluatedItems),fp={id:pp,compile:dp,interpret:up,collectEvaluatedProperties:mp,collectEvaluatedItems:hp},yp="https://json-schema.org/keyword/else",gp=async(e,t,r)=>{const o=E(e.document.dialectId,"https://json-schema.org/keyword/if");if(lo(o,r)){const s=await z(o,r);return[await p.compile(s,t),await p.compile(e,t)]}else return[]},vp=([e,t],r,o,s,n)=>e===void 0||p.interpret(e,r,o,s,!0)||p.interpret(t,r,o,s,n),$p=([e,t],r,o,s)=>e===void 0||p.interpret(e,r,o,s,!0)?new Set:p.collectEvaluatedProperties(t,r,o,s),wp=([e,t],r,o,s)=>e===void 0||p.interpret(e,r,o,s,!0)?new Set:p.collectEvaluatedItems(t,r,o,s),jp={id:yp,compile:gp,interpret:vp,collectEvaluatedProperties:$p,collectEvaluatedItems:wp},bp="https://json-schema.org/keyword/enum",kp=e=>T(J(e),O(y),O(xe),F),xp=(e,t)=>{const r=xe(b(t));return e.some(o=>r===o)},Sp={id:bp,compile:kp,interpret:xp},Po="https://json-schema.org/keyword/examples",Ep=e=>y(e),Rp=(e,t,r,o,s,n)=>(L(t,Po,n,e),!0),Ip={id:Po,compile:Ep,interpret:Rp},Tp="https://json-schema.org/keyword/exclusiveMaximum",Pp=e=>y(e),_p=(e,t)=>g(t)!=="number"||b(t)<e,Op={id:Tp,compile:Pp,interpret:_p},Ap="https://json-schema.org/keyword/exclusiveMinimum",Cp=e=>y(e),zp=(e,t)=>g(t)!=="number"||b(t)>e,Np={id:Ap,compile:Cp,interpret:zp},_o="https://json-schema.org/keyword/format",Dp=e=>y(e),Fp=(e,t,r,o,s,n)=>(L(t,_o,n,e),!0),Lp={id:_o,compile:Dp,interpret:Fp},qp={id:"https://json-schema.org/keyword/id"},Up="https://json-schema.org/keyword/if",Mp=(e,t)=>p.compile(e,t),Vp=(e,t,r,o)=>(p.interpret(e,t,r,o,!0),!0),Hp=(e,t,r,o)=>p.collectEvaluatedProperties(e,t,r,o)||[],Jp=(e,t,r,o)=>p.collectEvaluatedItems(e,t,r,o)||new Set,Bp={id:Up,compile:Mp,interpret:Vp,collectEvaluatedProperties:Hp,collectEvaluatedItems:Jp},Wp=()=>{const e=N(!1),t=N(!0);return _(e,t),{start:e,end:t}},Gp=e=>{const t=N(!1),r=N(!0);return ed(t,r,e),{start:t,end:r}},Kp=(e,t)=>e===void 0?t:(_(e.end,t.start),e.end.isEnd=!1,{start:e.start,end:t.end}),Qp=(e,t)=>{const r=N(!1);_(r,e.start),_(r,t.start);const o=N(!0);return _(e.end,o),e.end.isEnd=!1,_(t.end,o),t.end.isEnd=!1,{start:r,end:o}},Zp=e=>{const t=N(!1),r=N(!0);return _(t,r),_(t,e.start),_(e.end,r),_(e.end,e.start),e.end.isEnd=!1,{start:t,end:r}},Xp=e=>{const t=N(!1),r=N(!0);return _(t,r),_(t,e.start),_(e.end,r),e.end.isEnd=!1,{start:t,end:r}},Yp=e=>{const t=N(!1),r=N(!0);return _(t,e.start),_(e.end,r),_(e.end,e.start),e.end.isEnd=!1,{start:t,end:r}},_=(e,t)=>{e.epsilonTransitions.push(t)},ed=(e,t,r)=>{e.transition[r]=t},N=e=>({isEnd:e,transition:{},epsilonTransitions:[]}),td="https://json-schema.org/keyword/itemPattern",Oo=async(e,t)=>{const r=[[]];let o=r[0];for await(const s of J(e))if(q(s)==="string"){const n=y(s);if(n==="*")o.push(Zp(o.pop()));else if(n==="?")o.push(Xp(o.pop()));else if(n==="+")o.push(Yp(o.pop()));else if(n==="|")o=[],r.push(o);else throw Error(`Unsupported pattern syntax: ${n}`)}else{const n=q(s)==="array"?Oo(s,t):Gp(await p.compile(s,t));o.push(await n)}return zt(e)===0?Wp():r.map(s=>s.reduce(Kp)).reduce(Qp)},Ft=e=>(t,r,o,s,n)=>{if(g(r)!=="array")return!0;let a=[];at(t.start,a,[]);for(const i of V(r)){const l=[];for(const d of a){const f=rd(e,d.transition,i,o,s,n);f&&at(f,l,[])}a=l}return!!a.find(i=>i.isEnd)},at=(e,t,r)=>{if(e.epsilonTransitions.length)for(const o of e.epsilonTransitions)r.find(s=>s===o)||(r.push(o),at(o,t,r));else t.push(e)},rd=(e,t,r,o,s,n)=>{for(const a in t)if(e(a,r,o,s,n))return t[a]},od=Ft(p.interpret),sd=Ft(p.collectEvaluatedProperties),nd=Ft(p.collectEvaluatedItems),ad={id:td,compile:Oo,interpret:od,collectEvalatedProperties:sd,collectEvalatedItems:nd},id="https://json-schema.org/keyword/items",cd=async(e,t,r)=>{const o=E(e.document.dialectId,"https://json-schema.org/keyword/prefixItems"),s=await z(o,r);return[q(s)==="array"?zt(s):0,await p.compile(e,t)]},Ao=([e,t],r,o,s,n)=>{if(g(r)!=="array")return!0;let a=!0;for(const i of ho(e,V(r)))p.interpret(t,i,o,s,n)||(a=!1);return a},ld=(e,t,r,o)=>{if(!Ao(e,t,r,o,!0))return!1;const s=new Set;for(let n=e[0];n<Z(t);n++)s.add(n);return s},pd={id,compile:cd,interpret:Ao,collectEvaluatedItems:ld},dd="https://json-schema.org/keyword/maxContains",ud=e=>y(e),md=()=>!0,hd={id:dd,compile:ud,interpret:md},fd="https://json-schema.org/keyword/maxItems",yd=e=>y(e),gd=(e,t)=>g(t)!=="array"||Z(t)<=e,vd={id:fd,compile:yd,interpret:gd},$d="https://json-schema.org/keyword/maxLength",wd=e=>y(e),jd=(e,t)=>g(t)!=="string"||[...b(t)].length<=e,bd={id:$d,compile:wd,interpret:jd},kd="https://json-schema.org/keyword/maxProperties",xd=e=>y(e),Sd=(e,t)=>g(t)!=="object"||[...Nt(t)].length<=e,Ed={id:kd,compile:xd,interpret:Sd},Rd="https://json-schema.org/keyword/maximum",Id=e=>y(e),Td=(e,t)=>g(t)!=="number"||b(t)<=e,Pd={id:Rd,compile:Id,interpret:Td},_d="https://json-schema.org/keyword/minContains",Od=e=>y(e),Ad=()=>!0,Cd={id:_d,compile:Od,interpret:Ad},zd="https://json-schema.org/keyword/minItems",Nd=e=>y(e),Dd=(e,t)=>g(t)!=="array"||Z(t)>=e,Fd={id:zd,compile:Nd,interpret:Dd},Ld="https://json-schema.org/keyword/minLength",qd=e=>y(e),Ud=(e,t)=>g(t)!=="string"||[...b(t)].length>=e,Md={id:Ld,compile:qd,interpret:Ud},Vd="https://json-schema.org/keyword/minProperties",Hd=e=>y(e),Jd=(e,t)=>g(t)!=="object"||[...Nt(t)].length>=e,Bd={id:Vd,compile:Hd,interpret:Jd},Wd="https://json-schema.org/keyword/minimum",Gd=e=>y(e),Kd=(e,t)=>g(t)!=="number"||b(t)>=e,Qd={id:Wd,compile:Gd,interpret:Kd},Zd="https://json-schema.org/keyword/multipleOf",Xd=e=>y(e),Yd=(e,t)=>{if(g(t)!=="number")return!0;const r=b(t)%e;return lr(0,r)||lr(e,r)},lr=(e,t)=>Math.abs(e-t)<11920929e-14,eu={id:Zd,compile:Xd,interpret:Yd},tu="https://json-schema.org/keyword/not",ru=p.compile,ou=(e,t,r,o,s)=>!p.interpret(e,t,r,o,s),su={id:tu,compile:ru,interpret:ou},nu="https://json-schema.org/keyword/oneOf",au=(e,t)=>T(J(e),O(r=>p.compile(r,t)),F),iu=(e,t,r,o,s)=>{let n=0;for(const a of e)p.interpret(a,t,r,o,s)&&n++;return n===1},cu=(e,t,r,o)=>{let s=!1;for(const n of e){const a=p.collectEvaluatedProperties(n,t,r,o);if(a){if(s)return!1;s=a}}return s},lu=(e,t,r,o)=>{let s=!1;for(const n of e){const a=p.collectEvaluatedItems(n,t,r,o);if(a){if(s)return!1;s=a}}return s},pu={id:nu,compile:au,interpret:iu,collectEvaluatedProperties:cu,collectEvaluatedItems:lu},du="https://json-schema.org/keyword/pattern",uu=e=>new RegExp(y(e),"u"),mu=(e,t)=>g(t)!=="string"||e.test(b(t)),hu={id:du,compile:uu,interpret:mu},fu="https://json-schema.org/keyword/patternProperties",yu=(e,t)=>T(re(e),O(async([r,o])=>[new RegExp(r,"u"),await p.compile(o,t)]),F),gu=(e,t,r,o,s)=>{if(g(t)!=="object")return!0;let n=!0;for(const[a,i]of e)for(const[l,d]of Q(t)){const f=b(l);a.test(f)&&!p.interpret(i,d,r,o,s)&&(n=!1)}return n},vu=(e,t,r,o)=>{if(g(t)!=="object")return!1;const s=new Set;for(const[n,a]of e)for(const[i,l]of Q(t)){const d=b(i);if(n.test(d)){if(!p.interpret(a,l,r,o,!0))return!1;s.add(d)}}return s},$u={id:fu,compile:yu,interpret:gu,collectEvaluatedProperties:vu},wu="https://json-schema.org/keyword/prefixItems",ju=(e,t)=>T(J(e),O(r=>p.compile(r,t)),F),Co=(e,t,r,o,s)=>{if(g(t)!=="array")return!0;let n=!0,a=0;const i=Z(t);for(const[l,d]of qe(e,V(t))){if(a>=i)break;p.interpret(l,d,r,o,s)||(n=!1),a++}return n},bu=(e,t,r,o)=>Co(e,t,r,o,!0)&&new Set(e.map((s,n)=>n)),ku={id:wu,compile:ju,interpret:Co,collectEvaluatedItems:bu},xu="https://json-schema.org/keyword/properties",Su=(e,t)=>T(re(e),O(async([r,o])=>[r,await p.compile(o,t)]),st),Eu=(e,t,r,o,s)=>{if(g(t)!=="object")return!0;let n=!0;for(const[a,i]of Q(t)){const l=b(a);l in e&&!p.interpret(e[l],i,r,o,s)&&(n=!1)}return n},Ru=(e,t,r,o)=>{if(g(t)!=="object")return!1;const s=new Set;for(const[n,a]of Q(t)){const i=b(n);if(i in e){if(!p.interpret(e[i],a,r,o,!0))return!1;s.add(i)}}return s},Iu={id:xu,compile:Su,interpret:Eu,collectEvaluatedProperties:Ru},Tu="https://json-schema.org/keyword/propertyDependencies",Pu=(e,t)=>T(re(e),O(async([r,o])=>[r,await T(re(o),O(async([s,n])=>[s,await p.compile(n,t)]),st)]),st),_u=(e,t,r,o,s)=>{if(g(t)!=="object")return!0;let n=!0;const a=b(t);for(const[i,l]of Object.entries(e)){const d=a[i];pe(i,t)&&d in l&&!p.interpret(l[d],t,r,o,s)&&(n=!1)}return n},Ou=(e,t,r,o)=>{const s=new Set;for(const n in e){const a=b(t)[n],i=e[n];if(pe(n,t)&&a in i){const l=p.collectEvaluatedProperties(i[a],t,r,o);if(!l)return!1;l.forEach(s.add,s)}}return s},Au={id:Tu,compile:Pu,interpret:_u,collectEvaluatedProperties:Ou},Cu="https://json-schema.org/keyword/propertyNames",zu=(e,t)=>p.compile(e,t),Nu=(e,t,r,o)=>{if(g(t)!=="object")return!0;let s=!0;for(const n of Nt(t))p.interpret(e,n,r,o,!0)||(s=!1);return s},Du={id:Cu,compile:zu,interpret:Nu},zo="https://json-schema.org/keyword/readOnly",Fu=e=>y(e),Lu=(e,t,r,o,s,n)=>(L(t,zo,n,e),!0),qu={id:zo,compile:Fu,interpret:Lu},Uu="https://json-schema.org/keyword/ref",Mu=p.compile,Vu=p.interpret,Hu=p.collectEvaluatedProperties,Ju=p.collectEvaluatedItems,Bu={id:Uu,compile:Mu,interpret:Vu,collectEvaluatedProperties:Hu,collectEvaluatedItems:Ju},Wu="https://json-schema.org/keyword/requireAllExcept",Gu=async(e,t,r)=>{const o=await y(e),s=E(e.document.dialectId,"https://json-schema.org/keyword/properties"),n=await z(s,r),a=q(n)==="object"?et(n):[],i=new Set(a);return o.forEach(l=>a.remove(l)),[...i]},Ku=(e,t)=>g(t)!=="object"||e.every(r=>Object.hasOwn(b(t),r)),Qu={id:Wu,compile:Gu,interpret:Ku},Zu="https://json-schema.org/keyword/required",Xu=e=>y(e),Yu=(e,t)=>g(t)!=="object"||e.every(r=>Object.hasOwn(b(t),r)),em={id:Zu,compile:Xu,interpret:Yu},No="https://json-schema.org/keyword/title",tm=e=>y(e),rm=(e,t,r,o,s,n)=>(L(t,No,n,e),!0),om={id:No,compile:tm,interpret:rm},sm="https://json-schema.org/keyword/then",nm=async(e,t,r)=>{const o=E(e.document.dialectId,"https://json-schema.org/keyword/if");if(lo(o,r)){const s=await z(o,r);return[await p.compile(s,t),await p.compile(e,t)]}else return[]},am=([e,t],r,o,s,n)=>e===void 0||!p.interpret(e,r,o,s,!0)||p.interpret(t,r,o,s,n),im=([e,t],r,o,s)=>e===void 0||!p.interpret(e,r,o,s,!0)?new Set:p.collectEvaluatedProperties(t,r,o,s),cm=([e,t],r,o,s)=>e===void 0||!p.interpret(e,r,o,s,!0)?new Set:p.collectEvaluatedItems(t,r,o,s),lm={id:sm,compile:nm,interpret:am,collectEvaluatedProperties:im,collectEvaluatedItems:cm},pm="https://json-schema.org/keyword/type",dm=e=>y(e),um=(e,t)=>typeof e=="string"?pr(t)(e):e.some(pr(t)),pr=e=>t=>t==="integer"?g(e)==="number"&&Number.isInteger(b(e)):g(e)===t,mm={id:pm,compile:dm,interpret:um},hm="https://json-schema.org/keyword/unevaluatedItems",fm=async(e,t,r)=>[le(r),await p.compile(e,t)],ym=([e,t],r,o,s,n)=>{if(g(r)!=="array")return!0;const a=p.collectEvaluatedItems(e,r,o,s,!0);if(a===!1)return!0;let i=!0;for(const[l,d]of qe(V(r),Ce(0)))!a.has(d)&&!p.interpret(t,l,o,s,n)&&(i=!1);return i},gm=(e,t,r,o)=>{const s=p.collectEvaluatedItems(e[0],t,r,o,!0);if(!s)return!1;const n=new Set;for(let a=0;a<Z(t);a++)s.has(a)||n.add(a);return n},vm={id:hm,compile:fm,interpret:ym,collectEvaluatedItems:gm},$m="https://json-schema.org/keyword/unevaluatedProperties",wm=async(e,t,r)=>[le(r),await p.compile(e,t)],jm=([e,t],r,o,s,n)=>{if(g(r)!=="object")return!0;const a=p.collectEvaluatedProperties(e,r,o,s,!0);if(a===!1)return!0;let i=!0;for(const[l,d]of Q(r)){const f=b(l);!a.has(f)&&!p.interpret(t,d,o,s,n)&&(i=!1)}return i},bm=([e,t],r,o,s)=>{if(g(r)!=="object")return!0;const n=p.collectEvaluatedProperties(e,r,o,s,!0);if(!n)return!1;for(const[a,i]of Q(r)){const l=b(a);if(!n.has(l)){if(!p.interpret(t,i,o,s,!0))return!1;n.add(l)}}return n},km={id:$m,compile:wm,interpret:jm,collectEvaluatedProperties:bm},xm="https://json-schema.org/keyword/uniqueItems",Sm=e=>y(e),Em=(e,t)=>{if(g(t)!=="array"||e===!1)return!0;const r=b(t).map(xe);return new Set(r).size===r.length},Rm={id:xm,compile:Sm,interpret:Em},Do="https://json-schema.org/keyword/unknown",Im=e=>[[...Ze(e.cursor)].pop(),y(e)],Tm=([e,t],r,o,s,n,a)=>{const i=`${Do}#${e}`;return L(r,i,a,t),!0},Pm={id:Do,compile:Im,interpret:Tm},_m={id:"https://json-schema.org/keyword/vocabulary"},Fo="https://json-schema.org/keyword/writeOnly",Om=e=>y(e),Am=(e,t,r,o,s,n)=>(L(t,Fo,n,e),!0),Cm={id:Fo,compile:Om,interpret:Am};so("application/schema+json",hc);u(Vc);u(Kc);u(Qc);u(rl);u(cl);u(kl);u(Rl);u(_l);u(Cl);u(Dl);u(ql);u(Vl);u(Wl);u(Zl);u(rp);u(np);u(cp);u(lp);u(fp);u(jp);u(Sp);u(Ip);u(Op);u(Np);u(Lp);u(qp);u(Bp);u(ad);u(pd);u(hd);u(vd);u(bd);u(Ed);u(Pd);u(Cd);u(Fd);u(Md);u(Bd);u(Qd);u(eu);u(su);u(pu);u(hu);u($u);u(ku);u(Iu);u(Au);u(Du);u(qu);u(Bu);u(Qu);u(em);u(om);u(lm);u(mm);u(vm);u(km);u(Rm);u(Pm);u(_m);u(Cm);const zm={$schema:"https://json-schema.org/validation",$vocabulary:{"https://json-schema.org/vocab/core":!0,"https://json-schema.org/vocab/applicator":!0,"https://json-schema.org/vocab/unevaluated":!0,"https://json-schema.org/vocab/validation":!0,"https://json-schema.org/vocab/meta-data":!0,"https://json-schema.org/vocab/format-annotation":!0,"https://json-schema.org/vocab/content":!0},title:"Core and Validation specifications meta-schema",$dynamicAnchor:"meta",allOf:[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format-annotation"},{$ref:"meta/content"}]},Nm={$schema:"https://json-schema.org/validation",title:"Core vocabulary meta-schema",$dynamicAnchor:"meta",type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{type:"string",format:"uri"},$anchor:{$ref:"#/$defs/anchor"},$ref:{type:"string",format:"uri-reference"},$dynamicRef:{$ref:"#/$defs/anchor"},$dynamicAnchor:{$ref:"#/$defs/anchor"},$vocabulary:{type:"object",propertyNames:{type:"string",format:"uri"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$dynamicRef:"meta"}}},$defs:{anchor:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"}}},Dm={$schema:"https://json-schema.org/validation",title:"Applicator vocabulary meta-schema",$dynamicAnchor:"meta",properties:{prefixItems:{$ref:"#/$defs/schemaArray"},items:{$dynamicRef:"meta"},contains:{$dynamicRef:"meta"},itemPattern:{$ref:"#/$defs/itemPattern"},additionalProperties:{$dynamicRef:"meta"},properties:{type:"object",additionalProperties:{$dynamicRef:"meta"}},patternProperties:{type:"object",additionalProperties:{$dynamicRef:"meta"},propertyNames:{format:"regex"}},dependentSchemas:{type:"object",additionalProperties:{$dynamicRef:"meta"}},propertyDependencies:{type:"object",additionalProperties:{type:"object",additionalProperties:{$dynamicRef:"meta"}}},propertyNames:{$dynamicRef:"meta"},if:{$dynamicRef:"meta"},then:{$dynamicRef:"meta"},else:{$dynamicRef:"meta"},conditional:{type:"array",items:{if:{type:"array"},then:{items:{$dynamicRef:"meta"}},else:{$dynamicRef:"meta"}}},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$dynamicRef:"meta"}},$defs:{schemaArray:{type:"array",minItems:1,items:{$dynamicRef:"meta"}},itemPattern:{type:"array",itemPattern:[[{if:{type:"array"},then:{$ref:"#/$defs/itemPattern"},else:{$dynamicRef:"meta"}},{enum:["?","*","+"]},"?","|",{const:"|"}],"*"]}}},Fm={$schema:"https://json-schema.org/validation",title:"Validation vocabulary meta-schema",$dynamicAnchor:"meta",properties:{multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeInteger"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeInteger"},uniqueItems:{type:"boolean"},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger"},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeInteger"},required:{$ref:"#/$defs/stringArray"},optional:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}},const:!0,enum:{type:"array",items:!0},type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]}},$defs:{nonNegativeInteger:{type:"integer",minimum:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0}}},Lm={$schema:"https://json-schema.org/validation",title:"Meta-data vocabulary meta-schema",$dynamicAnchor:"meta",properties:{title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean"},readOnly:{type:"boolean"},writeOnly:{type:"boolean"},examples:{type:"array"}}},qm={$schema:"https://json-schema.org/validation",title:"Format vocabulary meta-schema for annotation results",$dynamicAnchor:"meta",properties:{format:{type:"string"}}},Um={$schema:"https://json-schema.org/validation",title:"Format vocabulary meta-schema for assertion results",$dynamicAnchor:"meta",properties:{format:{type:"string"}}},Mm={$schema:"https://json-schema.org/validation",title:"Content vocabulary meta-schema",$dynamicAnchor:"meta",properties:{contentMediaType:{type:"string"},contentEncoding:{type:"string"},contentSchema:{$dynamicRef:"meta"}}},Vm={$schema:"https://json-schema.org/validation",title:"Unevaluated applicator vocabulary meta-schema",$dynamicAnchor:"meta",properties:{unevaluatedItems:{$dynamicRef:"meta"},unevaluatedProperties:{$dynamicRef:"meta"}}};R("https://json-schema.org/vocab/core",{$anchor:"https://json-schema.org/keyword/anchor",$comment:"https://json-schema.org/keyword/comment",$defs:"https://json-schema.org/keyword/definitions",$dynamicAnchor:"https://json-schema.org/keyword/dynamicAnchor",$dynamicRef:"https://json-schema.org/keyword/dynamicRef",$id:"https://json-schema.org/keyword/id",$ref:"https://json-schema.org/keyword/ref",$vocabulary:"https://json-schema.org/keyword/vocabulary"});R("https://json-schema.org/vocab/applicator",{additionalProperties:"https://json-schema.org/keyword/additionalProperties",allOf:"https://json-schema.org/keyword/allOf",anyOf:"https://json-schema.org/keyword/anyOf",contains:"https://json-schema.org/keyword/contains",minContains:"https://json-schema.org/keyword/minContains",maxContains:"https://json-schema.org/keyword/maxContains",dependentSchemas:"https://json-schema.org/keyword/dependentSchemas",if:"https://json-schema.org/keyword/if",then:"https://json-schema.org/keyword/then",else:"https://json-schema.org/keyword/else",conditional:"https://json-schema.org/keyword/conditional",items:"https://json-schema.org/keyword/items",itemPattern:"https://json-schema.org/keyword/itemPattern",not:"https://json-schema.org/keyword/not",oneOf:"https://json-schema.org/keyword/oneOf",patternProperties:"https://json-schema.org/keyword/patternProperties",prefixItems:"https://json-schema.org/keyword/prefixItems",properties:"https://json-schema.org/keyword/properties",propertyDependencies:"https://json-schema.org/keyword/propertyDependencies",propertyNames:"https://json-schema.org/keyword/propertyNames"});R("https://json-schema.org/vocab/validation",{const:"https://json-schema.org/keyword/const",dependentRequired:"https://json-schema.org/keyword/dependentRequired",enum:"https://json-schema.org/keyword/enum",exclusiveMaximum:"https://json-schema.org/keyword/exclusiveMaximum",exclusiveMinimum:"https://json-schema.org/keyword/exclusiveMinimum",maxItems:"https://json-schema.org/keyword/maxItems",maxLength:"https://json-schema.org/keyword/maxLength",maxProperties:"https://json-schema.org/keyword/maxProperties",maximum:"https://json-schema.org/keyword/maximum",minItems:"https://json-schema.org/keyword/minItems",minLength:"https://json-schema.org/keyword/minLength",minProperties:"https://json-schema.org/keyword/minProperties",minimum:"https://json-schema.org/keyword/minimum",multipleOf:"https://json-schema.org/keyword/multipleOf",requireAllExcept:"https://json-schema.org/keyword/requireAllExcept",pattern:"https://json-schema.org/keyword/pattern",required:"https://json-schema.org/keyword/required",type:"https://json-schema.org/keyword/type",uniqueItems:"https://json-schema.org/keyword/uniqueItems"});R("https://json-schema.org/vocab/meta-data",{default:"https://json-schema.org/keyword/default",deprecated:"https://json-schema.org/keyword/deprecated",description:"https://json-schema.org/keyword/description",examples:"https://json-schema.org/keyword/examples",readOnly:"https://json-schema.org/keyword/readOnly",title:"https://json-schema.org/keyword/title",writeOnly:"https://json-schema.org/keyword/writeOnly"});R("https://json-schema.org/vocab/format-annotation",{format:"https://json-schema.org/keyword/format"});R("https://json-schema.org/vocab/format-assertion",{format:"https://json-schema.org/keyword/format-assertion"});R("https://json-schema.org/vocab/content",{contentEncoding:"https://json-schema.org/keyword/contentEncoding",contentMediaType:"https://json-schema.org/keyword/contentMediaType",contentSchema:"https://json-schema.org/keyword/contentSchema"});R("https://json-schema.org/vocab/unevaluated",{unevaluatedItems:"https://json-schema.org/keyword/unevaluatedItems",unevaluatedProperties:"https://json-schema.org/keyword/unevaluatedProperties"});const Lo="https://json-schema.org/validation";Fe(Lo,{"https://json-schema.org/vocab/core":!0,"https://json-schema.org/vocab/applicator":!0,"https://json-schema.org/vocab/validation":!0,"https://json-schema.org/vocab/meta-data":!0,"https://json-schema.org/vocab/format-annotation":!0,"https://json-schema.org/vocab/content":!0,"https://json-schema.org/vocab/unevaluated":!0});w(zm,Lo);w(Nm,"https://json-schema.org/meta/core");w(Dm,"https://json-schema.org/meta/applicator");w(Fm,"https://json-schema.org/meta/validation");w(Lm,"https://json-schema.org/meta/meta-data");w(qm,"https://json-schema.org/meta/format-annotation");w(Um,"https://json-schema.org/meta/format-assertion");w(Mm,"https://json-schema.org/meta/content");w(Vm,"https://json-schema.org/meta/unevaluated");const Hm={$schema:"https://json-schema.org/draft/2019-09/schema",$id:"https://json-schema.org/draft/2019-09/schema",$vocabulary:{"https://json-schema.org/draft/2019-09/vocab/core":!0,"https://json-schema.org/draft/2019-09/vocab/applicator":!0,"https://json-schema.org/draft/2019-09/vocab/validation":!0,"https://json-schema.org/draft/2019-09/vocab/meta-data":!0,"https://json-schema.org/draft/2019-09/vocab/format":!1,"https://json-schema.org/draft/2019-09/vocab/content":!0},$recursiveAnchor:!0,title:"Core and Validation specifications meta-schema",allOf:[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format"},{$ref:"meta/content"}],type:["object","boolean"],properties:{definitions:{$comment:"While no longer an official keyword as it is replaced by $defs, this keyword is retained in the meta-schema to prevent incompatible extensions as it remains in common use.",type:"object",additionalProperties:{$recursiveRef:"#"},default:{}},dependencies:{$comment:'"dependencies" is no longer a keyword, but schema authors should avoid redefining it to facilitate a smooth transition to "dependentSchemas" and "dependentRequired"',type:"object",additionalProperties:{anyOf:[{$recursiveRef:"#"},{$ref:"meta/validation#/$defs/stringArray"}]}}}},Jm={$id:"https://json-schema.org/draft/2019-09/meta/core",$schema:"https://json-schema.org/draft/2019-09/schema",$vocabulary:{"https://json-schema.org/draft/2019-09/vocab/core":!0},$recursiveAnchor:!0,title:"Core vocabulary meta-schema",type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{type:"string",format:"uri"},$anchor:{type:"string",pattern:"^[A-Za-z][-A-Za-z0-9.:_]*$"},$ref:{type:"string",format:"uri-reference"},$recursiveRef:{type:"string",format:"uri-reference"},$recursiveAnchor:{type:"boolean",default:!1},$vocabulary:{type:"object",propertyNames:{type:"string",format:"uri"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$recursiveRef:"#"},default:{}}}},Bm={$id:"https://json-schema.org/draft/2019-09/meta/applicator",$schema:"https://json-schema.org/draft/2019-09/schema",$vocabulary:{"https://json-schema.org/draft/2019-09/vocab/applicator":!0},$recursiveAnchor:!0,title:"Applicator vocabulary meta-schema",properties:{additionalItems:{$recursiveRef:"#"},unevaluatedItems:{$recursiveRef:"#"},items:{anyOf:[{$recursiveRef:"#"},{$ref:"#/$defs/schemaArray"}]},contains:{$recursiveRef:"#"},additionalProperties:{$recursiveRef:"#"},unevaluatedProperties:{$recursiveRef:"#"},properties:{type:"object",additionalProperties:{$recursiveRef:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$recursiveRef:"#"},propertyNames:{format:"regex"},default:{}},dependentSchemas:{type:"object",additionalProperties:{$recursiveRef:"#"}},propertyNames:{$recursiveRef:"#"},if:{$recursiveRef:"#"},then:{$recursiveRef:"#"},else:{$recursiveRef:"#"},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$recursiveRef:"#"}},$defs:{schemaArray:{type:"array",minItems:1,items:{$recursiveRef:"#"}}}},Wm={$id:"https://json-schema.org/draft/2019-09/meta/validation",$schema:"https://json-schema.org/draft/2019-09/schema",$vocabulary:{"https://json-schema.org/draft/2019-09/vocab/validation":!0},$recursiveAnchor:!0,title:"Validation vocabulary meta-schema",type:["object","boolean"],properties:{multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger",default:1},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeIntegerDefault0"},required:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}},const:!0,enum:{type:"array",items:!0},type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]}},$defs:{nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{$ref:"#/$defs/nonNegativeInteger",default:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}}},Gm={$id:"https://json-schema.org/draft/2019-09/meta/meta-data",$schema:"https://json-schema.org/draft/2019-09/schema",$vocabulary:{"https://json-schema.org/draft/2019-09/vocab/meta-data":!0},$recursiveAnchor:!0,title:"Meta-data vocabulary meta-schema",type:["object","boolean"],properties:{title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean",default:!1},readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0}}},Km={$id:"https://json-schema.org/draft/2019-09/meta/format",$schema:"https://json-schema.org/draft/2019-09/schema",$vocabulary:{"https://json-schema.org/draft/2019-09/vocab/format":!0},$recursiveAnchor:!0,title:"Format vocabulary meta-schema",type:["object","boolean"],properties:{format:{type:"string"}}},Qm={$id:"https://json-schema.org/draft/2019-09/meta/content",$schema:"https://json-schema.org/draft/2019-09/schema",$vocabulary:{"https://json-schema.org/draft/2019-09/vocab/content":!0},$recursiveAnchor:!0,title:"Content vocabulary meta-schema",type:["object","boolean"],properties:{contentMediaType:{type:"string"},contentEncoding:{type:"string"},contentSchema:{$recursiveRef:"#"}}},Zm="https://json-schema.org/keyword/draft-04/additionalItems",Xm=async(e,t,r)=>{const o=E(e.document.dialectId,"https://json-schema.org/keyword/draft-04/items"),s=await z(o,r);return[q(s)==="array"?zt(s):Number.MAX_SAFE_INTEGER,await p.compile(e,t)]},qo=([e,t],r,o,s,n)=>g(r)!=="array"?!0:T(V(r),ho(e),rt(a=>p.interpret(t,a,o,s,n))),Ym=(e,t,r,o)=>{if(!qo(e,t,r,o,!0))return!1;const s=new Set;for(let n=e[0];n<Z(t);n++)s.add(n);return s},eh={id:Zm,compile:Xm,interpret:qo,collectEvaluatedItems:Ym},th="https://json-schema.org/keyword/draft-04/items",rh=(e,t)=>q(e)==="array"?T(J(e),O(r=>p.compile(r,t)),F):p.compile(e,t),Uo=(e,t,r,o,s)=>g(t)!=="array"?!0:typeof e=="string"?rt(n=>p.interpret(e,n,r,o,s),V(t)):T(qe(e,V(t)),yc(Z(t)),rt(([n,a])=>p.interpret(n,a,r,o,s))),oh=(e,t,r,o)=>Uo(e,t,r,o,!0)&&ot(typeof e=="string"?Ce(0,Z(t)):Ce(0,e.length)),sh={id:th,compile:rh,interpret:Uo,collectEvaluatedItems:oh},nh={id:"https://json-schema.org/keyword/draft-2019-09/recursiveAnchor"},ah="https://json-schema.org/keyword/draft-2020-12/dynamicRef",ih=async(e,t)=>{const r=eo(y(e)),o=await Le(y(e),e);return await p.compile(o,t),[o.document.baseUri,r,le(o)]},Lt=e=>([t,r,o],s,n,a,i)=>r in n.metaData[t].dynamicAnchors?(a={...n.metaData[t].dynamicAnchors,...a},e(a[r],s,n,a,i)):e(o,s,n,a,i),ch=Lt(p.interpret),lh=Lt(p.collectEvaluatedProperties),ph=Lt(p.collectEvaluatedItems),Mo={id:ah,compile:ih,interpret:ch,collectEvaluatedProperties:lh,collectEvaluatedItems:ph};u(eh);u(sh);u(nh);u(Mo);R("https://json-schema.org/draft/2019-09/vocab/core",{$anchor:"https://json-schema.org/keyword/anchor",$comment:"https://json-schema.org/keyword/comment",$defs:"https://json-schema.org/keyword/definitions",$recursiveAnchor:"https://json-schema.org/keyword/draft-2019-09/recursiveAnchor",$recursiveRef:"https://json-schema.org/keyword/draft-2020-12/dynamicRef",$id:"https://json-schema.org/keyword/id",$ref:"https://json-schema.org/keyword/ref",$vocabulary:"https://json-schema.org/keyword/vocabulary"});R("https://json-schema.org/draft/2019-09/vocab/applicator",{additionalItems:"https://json-schema.org/keyword/draft-04/additionalItems",additionalProperties:"https://json-schema.org/keyword/additionalProperties",allOf:"https://json-schema.org/keyword/allOf",anyOf:"https://json-schema.org/keyword/anyOf",contains:"https://json-schema.org/keyword/contains",dependentSchemas:"https://json-schema.org/keyword/dependentSchemas",if:"https://json-schema.org/keyword/if",then:"https://json-schema.org/keyword/then",else:"https://json-schema.org/keyword/else",items:"https://json-schema.org/keyword/draft-04/items",not:"https://json-schema.org/keyword/not",oneOf:"https://json-schema.org/keyword/oneOf",patternProperties:"https://json-schema.org/keyword/patternProperties",properties:"https://json-schema.org/keyword/properties",propertyNames:"https://json-schema.org/keyword/propertyNames",unevaluatedItems:"https://json-schema.org/keyword/unevaluatedItems",unevaluatedProperties:"https://json-schema.org/keyword/unevaluatedProperties"});R("https://json-schema.org/draft/2019-09/vocab/validation",{const:"https://json-schema.org/keyword/const",enum:"https://json-schema.org/keyword/enum",dependentRequired:"https://json-schema.org/keyword/dependentRequired",exclusiveMaximum:"https://json-schema.org/keyword/exclusiveMaximum",exclusiveMinimum:"https://json-schema.org/keyword/exclusiveMinimum",maxContains:"https://json-schema.org/keyword/maxContains",maxItems:"https://json-schema.org/keyword/maxItems",maxLength:"https://json-schema.org/keyword/maxLength",maxProperties:"https://json-schema.org/keyword/maxProperties",maximum:"https://json-schema.org/keyword/maximum",minContains:"https://json-schema.org/keyword/minContains",minItems:"https://json-schema.org/keyword/minItems",minLength:"https://json-schema.org/keyword/minLength",minProperties:"https://json-schema.org/keyword/minProperties",minimum:"https://json-schema.org/keyword/minimum",multipleOf:"https://json-schema.org/keyword/multipleOf",pattern:"https://json-schema.org/keyword/pattern",required:"https://json-schema.org/keyword/required",type:"https://json-schema.org/keyword/type",uniqueItems:"https://json-schema.org/keyword/uniqueItems"});R("https://json-schema.org/draft/2019-09/vocab/meta-data",{default:"https://json-schema.org/keyword/default",deprecated:"https://json-schema.org/keyword/deprecated",description:"https://json-schema.org/keyword/description",examples:"https://json-schema.org/keyword/examples",readOnly:"https://json-schema.org/keyword/readOnly",title:"https://json-schema.org/keyword/title",writeOnly:"https://json-schema.org/keyword/writeOnly"});R("https://json-schema.org/draft/2019-09/vocab/format",{format:"https://json-schema.org/keyword/format"});R("https://json-schema.org/draft/2019-09/vocab/content",{contentEncoding:"https://json-schema.org/keyword/contentEncoding",contentMediaType:"https://json-schema.org/keyword/contentMediaType",contentSchema:"https://json-schema.org/keyword/contentSchema"});Fe("https://json-schema.org/draft/2019-09/schema",{"https://json-schema.org/draft/2019-09/vocab/core":!0,"https://json-schema.org/draft/2019-09/vocab/applicator":!0,"https://json-schema.org/draft/2019-09/vocab/validation":!0,"https://json-schema.org/draft/2019-09/vocab/meta-data":!0,"https://json-schema.org/draft/2019-09/vocab/format":!0,"https://json-schema.org/draft/2019-09/vocab/content":!0},!0);w(Hm);w(Jm);w(Bm);w(Wm);w(Gm);w(Km);w(Qm);const dh={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://json-schema.org/draft/2020-12/schema",$vocabulary:{"https://json-schema.org/draft/2020-12/vocab/core":!0,"https://json-schema.org/draft/2020-12/vocab/applicator":!0,"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0,"https://json-schema.org/draft/2020-12/vocab/validation":!0,"https://json-schema.org/draft/2020-12/vocab/meta-data":!0,"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0,"https://json-schema.org/draft/2020-12/vocab/content":!0},$dynamicAnchor:"meta",title:"Core and Validation specifications meta-schema",allOf:[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/unevaluated"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format-annotation"},{$ref:"meta/content"}],type:["object","boolean"],properties:{definitions:{$comment:"While no longer an official keyword as it is replaced by $defs, this keyword is retained in the meta-schema to prevent incompatible extensions as it remains in common use.",type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},dependencies:{$comment:'"dependencies" is no longer a keyword, but schema authors should avoid redefining it to facilitate a smooth transition to "dependentSchemas" and "dependentRequired"',type:"object",additionalProperties:{anyOf:[{$dynamicRef:"#meta"},{$ref:"meta/validation#/$defs/stringArray"}]}}}},uh={$id:"https://json-schema.org/draft/2020-12/meta/core",$schema:"https://json-schema.org/draft/2020-12/schema",$dynamicAnchor:"meta",title:"Core vocabulary meta-schema",type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{type:"string",format:"uri"},$anchor:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"},$ref:{type:"string",format:"uri-reference"},$dynamicRef:{type:"string",format:"uri-reference"},$dynamicAnchor:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"},$vocabulary:{type:"object",propertyNames:{type:"string",format:"uri"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}}}},mh={$id:"https://json-schema.org/draft/2020-12/meta/applicator",$schema:"https://json-schema.org/draft/2020-12/schema",$dynamicAnchor:"meta",title:"Applicator vocabulary meta-schema",type:["object","boolean"],properties:{prefixItems:{$ref:"#/$defs/schemaArray"},items:{$dynamicRef:"#meta"},contains:{$dynamicRef:"#meta"},additionalProperties:{$dynamicRef:"#meta"},properties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},patternProperties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},propertyNames:{format:"regex"},default:{}},dependentSchemas:{type:"object",additionalProperties:{$dynamicRef:"#meta"}},propertyNames:{$dynamicRef:"#meta"},if:{$dynamicRef:"#meta"},then:{$dynamicRef:"#meta"},else:{$dynamicRef:"#meta"},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$dynamicRef:"#meta"}},$defs:{schemaArray:{type:"array",minItems:1,items:{$dynamicRef:"#meta"}}}},hh={$id:"https://json-schema.org/draft/2020-12/meta/validation",$schema:"https://json-schema.org/draft/2020-12/schema",$dynamicAnchor:"meta",title:"Validation vocabulary meta-schema",type:["object","boolean"],properties:{multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger",default:1},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeIntegerDefault0"},required:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}},const:!0,enum:{type:"array",items:!0},type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]}},$defs:{nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{$ref:"#/$defs/nonNegativeInteger",default:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}}},fh={$id:"https://json-schema.org/draft/2020-12/meta/meta-data",$schema:"https://json-schema.org/draft/2020-12/schema",$dynamicAnchor:"meta",title:"Meta-data vocabulary meta-schema",type:["object","boolean"],properties:{title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean",default:!1},readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0}}},yh={$id:"https://json-schema.org/draft/2020-12/meta/format-annotation",$schema:"https://json-schema.org/draft/2020-12/schema",$dynamicAnchor:"meta",title:"Format vocabulary meta-schema for annotation results",type:["object","boolean"],properties:{format:{type:"string"}}},gh={$id:"https://json-schema.org/draft/2020-12/meta/format-assertion",$schema:"https://json-schema.org/draft/2020-12/schema",$dynamicAnchor:"meta",title:"Format vocabulary meta-schema for assertion results",type:["object","boolean"],properties:{format:{type:"string"}}},vh={$id:"https://json-schema.org/draft/2020-12/meta/content",$schema:"https://json-schema.org/draft/2020-12/schema",$dynamicAnchor:"meta",title:"Content vocabulary meta-schema",type:["object","boolean"],properties:{contentMediaType:{type:"string"},contentEncoding:{type:"string"},contentSchema:{$dynamicRef:"#meta"}}},$h={$id:"https://json-schema.org/draft/2020-12/meta/unevaluated",$schema:"https://json-schema.org/draft/2020-12/schema",$dynamicAnchor:"meta",title:"Unevaluated applicator vocabulary meta-schema",type:["object","boolean"],properties:{unevaluatedItems:{$dynamicRef:"#meta"},unevaluatedProperties:{$dynamicRef:"#meta"}}},wh={id:"https://json-schema.org/keyword/draft-2020-12/dynamicAnchor"};u(Mo);u(wh);R("https://json-schema.org/draft/2020-12/vocab/core",{$anchor:"https://json-schema.org/keyword/anchor",$comment:"https://json-schema.org/keyword/comment",$defs:"https://json-schema.org/keyword/definitions",$dynamicAnchor:"https://json-schema.org/keyword/draft-2020-12/dynamicAnchor",$dynamicRef:"https://json-schema.org/keyword/draft-2020-12/dynamicRef",$id:"https://json-schema.org/keyword/id",$ref:"https://json-schema.org/keyword/ref",$vocabulary:"https://json-schema.org/keyword/vocabulary"});R("https://json-schema.org/draft/2020-12/vocab/applicator",{additionalProperties:"https://json-schema.org/keyword/additionalProperties",allOf:"https://json-schema.org/keyword/allOf",anyOf:"https://json-schema.org/keyword/anyOf",contains:"https://json-schema.org/keyword/contains",dependentSchemas:"https://json-schema.org/keyword/dependentSchemas",if:"https://json-schema.org/keyword/if",then:"https://json-schema.org/keyword/then",else:"https://json-schema.org/keyword/else",items:"https://json-schema.org/keyword/items",not:"https://json-schema.org/keyword/not",oneOf:"https://json-schema.org/keyword/oneOf",patternProperties:"https://json-schema.org/keyword/patternProperties",prefixItems:"https://json-schema.org/keyword/prefixItems",properties:"https://json-schema.org/keyword/properties",propertyNames:"https://json-schema.org/keyword/propertyNames"});R("https://json-schema.org/draft/2020-12/vocab/validation",{const:"https://json-schema.org/keyword/const",dependentRequired:"https://json-schema.org/keyword/dependentRequired",enum:"https://json-schema.org/keyword/enum",exclusiveMaximum:"https://json-schema.org/keyword/exclusiveMaximum",exclusiveMinimum:"https://json-schema.org/keyword/exclusiveMinimum",maxContains:"https://json-schema.org/keyword/maxContains",maxItems:"https://json-schema.org/keyword/maxItems",maxLength:"https://json-schema.org/keyword/maxLength",maxProperties:"https://json-schema.org/keyword/maxProperties",maximum:"https://json-schema.org/keyword/maximum",minContains:"https://json-schema.org/keyword/minContains",minItems:"https://json-schema.org/keyword/minItems",minLength:"https://json-schema.org/keyword/minLength",minProperties:"https://json-schema.org/keyword/minProperties",minimum:"https://json-schema.org/keyword/minimum",multipleOf:"https://json-schema.org/keyword/multipleOf",pattern:"https://json-schema.org/keyword/pattern",required:"https://json-schema.org/keyword/required",type:"https://json-schema.org/keyword/type",uniqueItems:"https://json-schema.org/keyword/uniqueItems"});R("https://json-schema.org/draft/2020-12/vocab/meta-data",{default:"https://json-schema.org/keyword/default",deprecated:"https://json-schema.org/keyword/deprecated",description:"https://json-schema.org/keyword/description",examples:"https://json-schema.org/keyword/examples",readOnly:"https://json-schema.org/keyword/readOnly",title:"https://json-schema.org/keyword/title",writeOnly:"https://json-schema.org/keyword/writeOnly"});R("https://json-schema.org/draft/2020-12/vocab/format-annotation",{format:"https://json-schema.org/keyword/format"});R("https://json-schema.org/draft/2020-12/vocab/format-assertion",{format:"https://json-schema.org/keyword/format-assertion"});R("https://json-schema.org/draft/2020-12/vocab/content",{contentEncoding:"https://json-schema.org/keyword/contentEncoding",contentMediaType:"https://json-schema.org/keyword/contentMediaType",contentSchema:"https://json-schema.org/keyword/contentSchema"});R("https://json-schema.org/draft/2020-12/vocab/unevaluated",{unevaluatedItems:"https://json-schema.org/keyword/unevaluatedItems",unevaluatedProperties:"https://json-schema.org/keyword/unevaluatedProperties"});Fe("https://json-schema.org/draft/2020-12/schema",{"https://json-schema.org/draft/2020-12/vocab/core":!0,"https://json-schema.org/draft/2020-12/vocab/applicator":!0,"https://json-schema.org/draft/2020-12/vocab/validation":!0,"https://json-schema.org/draft/2020-12/vocab/meta-data":!0,"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0,"https://json-schema.org/draft/2020-12/vocab/content":!0,"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0},!0);w(dh);w(uh);w(mh);w(hh);w(fh);w(yh);w(gh);w(vh);w($h);const jh=()=>new bh;class bh{addJsonSchema(t){return cr(it(t)),t.$id}addJsonSchemaString(t){return cr(it(t)),t.$id}async validate(t,r){return(await Nc(t,r,zc)).valid}}function it(e){if(typeof e!="object")return e;for(const[t,r]of Object.entries(e))t==="pattern"?e[t]=kh(String(r)):it(r);return e}function kh(e){return e.replace(/\\:/g,":")}class xh{constructor(){j(this,"total",0)}info(t,r){console.info(new Date().toLocaleString(),":",t,r)}startProcessing(t){this.total=t,console.log(new Date().toLocaleString(),":",`Processing total set to ${this.total}.`)}updateProcessing(t){console.log(new Date().toLocaleString(),":",`Processing ${t} out of ${this.total}.`)}endProcessing(){}}const Sh=()=>new xh,Eh=ci(),Vo=jh();ti(Vo);function Rh(){const[e,t]=A.useState({url:null,working:!1,completed:!1,statusMessage:"",statusArgs:void 0,report:null,progressTotal:null,progressActual:null});return{...e,validate:o=>{if(e.working===!0)return;t({url:o,working:!0,completed:!1,statusMessage:"",statusArgs:void 0,report:null,progressTotal:null,progressActual:null});const s=Sh(),n={info:(i,l)=>{s.info(i,l),t(d=>d.url===o?{...d,statusMessage:i,statusArgs:l}:d)},startProcessing(i){t(l=>({...l,progressTotal:i})),s.startProcessing(i)},updateProcessing(i){t(l=>({...l,progressActual:i})),s.updateProcessing(i)},endProcessing(){t(i=>({...i,progressTotal:null})),s.endProcessing()}};new ri(Eh,Vo,n).load(o).then(i=>{const l=$n(i),d=Ih(l);s.info("Validation report is ready.",{catalog:i,"raw-report":l,report:d}),t(f=>f.url===o?{...f,working:!1,completed:!0,statusMessage:"",report:d}:f)}).catch(i=>{t(l=>l.url===o?{...l,working:!1,completed:!0,statusMessage:"ui.validation-failed-{error}",statusArgs:{error:i}}:l)})}}}function Ih(e){return{...e,datasets:e.datasets.map(t=>({...t,datasets:t.datasets.map(r=>{let o=r.issues;for(const s of r.distributions)o=[...o,...s.issues];return{...r,allIssues:o}})}))}}var qt={},Th=G;Object.defineProperty(qt,"__esModule",{value:!0});var ct=qt.default=void 0,Ph=Th(K()),_h=c;ct=qt.default=(0,Ph.default)((0,_h.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"InfoOutlined");var Ut={},Oh=G;Object.defineProperty(Ut,"__esModule",{value:!0});var Ho=Ut.default=void 0,Ah=Oh(K()),Ch=c;Ho=Ut.default=(0,Ah.default)((0,Ch.jsx)("path",{d:"M12 5.99 19.53 19H4.47zM12 2 1 21h22zm1 14h-2v2h2zm0-6h-2v4h2z"}),"WarningAmberOutlined");function zh({level:e}){switch(e){case m.SUCCESS:return c.jsx(Se,{placement:"left",title:"",arrow:!0,children:c.jsx(ct,{sx:{color:"green"}})});case m.INFO:return c.jsx(Se,{placement:"left",title:"",arrow:!0,children:c.jsx(ct,{sx:{color:"blue"}})});case m.WARNING:return c.jsx(Se,{placement:"left",title:"",arrow:!0,children:c.jsx(Ho,{sx:{color:"yellow"}})});case m.ERROR:case m.CRITICAL:return c.jsx(Se,{placement:"left",title:"",arrow:!0,children:c.jsx(be,{sx:{color:"red"}})})}}function Mt({issues:e}){return e.length===0?null:c.jsx(fr,{disablePadding:!0,children:e.map((t,r)=>c.jsx(Nh,{issue:t},r))})}function Nh({issue:e}){const{t}=D(),r=t(e.payload,e.args);return c.jsxs(lt,{sx:{pl:4},children:[c.jsx(pt,{children:c.jsx(zh,{level:e.level})}),c.jsx(dt,{children:r})]})}function Dh({report:e}){return c.jsxs(c.Fragment,{children:[c.jsx(Fh,{state:e.summary}),c.jsx(qh,{catalogs:e.catalogs}),c.jsx(Uh,{resources:e.datasets})]})}function Fh({state:e}){const{t}=D();return c.jsxs(c.Fragment,{children:[c.jsxs("dl",{children:[c.jsx("dt",{children:t("ui.content-type")}),c.jsx("dd",{children:t(Lh(e.contentType))}),c.jsx("dt",{children:t("ui.catalog-url")}),e.catalogs.map(r=>c.jsxs("dd",{children:[r.iri,"¬†",c.jsx("a",{href:r.iri,target:"_blank",rel:"noopener noreferrer",children:c.jsx(Ne,{})})]},r.iri)),c.jsx("dt",{children:t("ui.catalog-title")}),e.catalogs.map(r=>c.jsx("dd",{children:r.czechTitle},r.iri))]}),c.jsx(Mt,{issues:e.issues}),c.jsxs("dl",{children:[c.jsx("dt",{children:t("ui.number-of-resources-with-error")}),c.jsx("dd",{children:e.resourcesWithError.length}),c.jsx("dt",{children:t("ui.number-of-datasets")}),c.jsx("dd",{children:e.allFoundDatasets.length}),c.jsx("dt",{children:t("ui.number-of-datasets-with-warning")}),c.jsx("dd",{children:e.datasetsWithOnlyWarning.length}),c.jsx("dt",{children:t("ui.number-of-datasets-with-error")}),c.jsx("dd",{children:e.datasetsWithError.length}),c.jsx("dt",{children:t("ui.number-of-hvd")}),c.jsx("dd",{children:e.highValueDatasets.length})]})]})}function Lh(e){switch(e){case C.JSONLD:return"ui.content-type-JSONLD";case C.SPARQL:return"ui.content-type-SPARQL";case C.TURTLE:return"ui.content-type-TURTLE";case null:return"ui.content-type-unknown"}}function qh(e){return null}const We=25;function Uh({resources:e}){const{t}=D(),[r,o]=A.useState(1),[s,n]=A.useState(0),[a,i]=A.useState([]),[l,d]=A.useState(()=>Vh(e)),[f,h]=A.useState(()=>wr(l,m.WARNING));A.useEffect(()=>{const x=[];for(const v of e){dr(v.issues,l)&&x.push(c.jsx(Hh,{resource:v},"resource:"+v.accessUrl));for(const P of v.datasets)l===m.INFO?x.push(c.jsx(ur,{dataset:P},"dataset:"+v.accessUrl+":"+P.iri)):dr(P.allIssues,l)&&x.push(c.jsx(ur,{dataset:P},"dataset:"+v.accessUrl+":"+P.iri))}n(Math.ceil(x.length/We)),i(x.slice((r-1)*We,r*We))},[e,l,r]);let k=null;return f&&(a.length===0?k=c.jsx(W,{sx:{m:2},children:t("ui.no-search-results")}):k=c.jsxs(c.Fragment,{children:[c.jsx(fr,{children:a}),c.jsx(ls,{count:s,variant:"outlined",shape:"rounded",size:"large",page:r,onChange:(x,v)=>o(v)})]})),c.jsxs(mr.Fragment,{children:[c.jsx(Mh,{value:l,onChange:d,show:f,setShow:h}),k]})}function Mh(e){const{t}=D();return c.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c.jsx(hr,{variant:"outlined",onClick:()=>e.setShow(!e.show),style:{height:"3em"},children:e.show?t("ui.hide-details"):t("ui.show-details")}),e.show?c.jsxs(as,{sx:{minWidth:300},children:[c.jsx(is,{variant:"standard",htmlFor:"filter-selector",children:t("ui.level-filter")}),c.jsxs(cs,{inputProps:{id:"filter-selector"},value:e.value,onChange:r=>e.onChange(r.target.value),children:[c.jsx("option",{value:m.INFO,children:t("ui.info")}),c.jsx("option",{value:m.WARNING,children:t("ui.warning")}),c.jsx("option",{value:m.ERROR,children:t("ui.error")}),c.jsx("option",{value:m.CRITICAL,children:t("ui.critical")})]})]}):null]})}function Vh(e){let t=m.INFO;for(const r of e){t=r.issues.map(o=>o.level).reduce(Gt,t);for(const o of r.datasets)t=o.allIssues.map(s=>s.level).reduce(Gt,t);if(t===m.ERROR||t===m.CRITICAL)return m.ERROR}return t}function dr(e,t){for(const r of e)if(wr(r.level,t))return!0;return!1}function Hh({resource:e}){const{t}=D(),[r,o]=A.useState(!0);return c.jsxs(c.Fragment,{children:[c.jsxs(lt,{children:[c.jsx(pt,{children:c.jsx($r,{sx:{color:Jo(e.issues,"blue")}})}),c.jsx(dt,{primary:t("ui.referenced-resources"),secondary:e.accessUrl}),c.jsx(W,{sx:{mr:"1rem"},children:c.jsx("a",{href:e.accessUrl,target:"_blank",rel:"noopener noreferrer",children:c.jsx(Ne,{})})}),c.jsx(W,{onClick:()=>o(!r),children:r?c.jsx(ft,{}):c.jsx(gt,{})})]}),c.jsx(yr,{in:r,timeout:"auto",unmountOnExit:!0,children:c.jsx(Mt,{issues:e.issues})})]})}function Jo(e,t){let r=!1;for(const o of e)switch(o.level){case m.CRITICAL:case m.ERROR:return"red";case m.WARNING:r=!0;break}return r?"yellow":t}function ur({dataset:e}){const{t}=D(),[r,o]=A.useState(!0),s=e.datasetSeries===null?t("ui.dataset"):t("ui.dataseries");return c.jsxs(c.Fragment,{children:[c.jsxs(lt,{children:[c.jsx(pt,{children:c.jsx(vr,{sx:{color:Jo(e.allIssues,"green")}})}),c.jsx(dt,{primary:s,secondary:e.iri}),c.jsx(W,{sx:{mr:"1rem"},children:c.jsx("a",{href:e.accessUrl,target:"_blank",rel:"noopener noreferrer",children:c.jsx(Ne,{})})}),e.allIssues.length===0?null:c.jsx(W,{onClick:()=>o(!r),children:r?c.jsx(ft,{}):c.jsx(gt,{})})]}),c.jsx(yr,{in:r,timeout:"auto",unmountOnExit:!0,children:c.jsx(Mt,{issues:e.allIssues})})]})}function Jh({report:e}){var r,o;let t;return((r=e.loadingFailure)==null?void 0:r.conversionToRdfFailed)===!0?t=c.jsx(As,{report:e}):((o=e.loadingFailure)==null?void 0:o.failedToFetchData)===!0?t=c.jsx(Os,{report:e}):e.summary.contentType===null?t=c.jsx(_s,{report:e}):t=c.jsx(Dh,{report:e}),c.jsx(W,{sx:{my:"1rem"},children:t})}function Bh(){const{t:e}=D(),t=Rh();return c.jsxs(c.Fragment,{children:[c.jsx("h1",{children:e("ui.title")}),c.jsx(vs,{}),c.jsx(bs,{disabled:t.working,completed:t.completed,onStartValidation:r=>t.validate(r)}),c.jsx(Ss,{working:t.working,message:t.statusMessage,args:t.statusArgs,total:t.progressTotal,actual:t.progressActual}),t.report===null?null:c.jsx(Jh,{report:t.report})]})}es.use(ts).use(rs).use(Yo).init({fallbackLng:"cs",supportedLngs:["cs"],debug:!1,interpolation:{escapeValue:!1},backend:{loadPath:"./locales/{{lng}}/{{ns}}.json"}});function Wh(){const e=ps("(prefers-color-scheme: dark)"),t=A.useMemo(()=>ds({palette:{mode:e?"dark":"light"}}),[e]);return c.jsxs(us,{theme:t,children:[c.jsx(ms,{}),c.jsx(hs,{fixed:!0,children:c.jsx(Bh,{})})]})}const Gh=document.getElementById("application");Ge.createRoot(Gh).render(c.jsx(mr.StrictMode,{children:c.jsx(Wh,{})}));
